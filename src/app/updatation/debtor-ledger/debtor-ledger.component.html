<div class="gWrapper">
    <app-header *ngIf="option === 'debtor'"  Titleheader="Receivable Ledger"></app-header>
    <app-header *ngIf="option === 'creditor'" Titleheader="Payable Ledger"></app-header>

    <!-- <div class="header">
        <mat-toolbar color="warn">
            <mat-toolbar-row>
                <button mat-button (click)="backNavigation()">BACK</button>
                <span class="example-spacer"></span>
                <span class="example-spacer"></span>
                <button mat-button (click)="home()">
                    <span class="material-icons">home</span>
                </button>
                <button mat-button disabled>
                    <img class="png-icon" src=".\assets\gImg\a2b2.png" style="max-width: 56px; min-width: 56px" />
                </button>
            </mat-toolbar-row>
        </mat-toolbar>
    </div> -->
  
        <div class=" mb-5 row mx-2 justify-content-center cardOuter align-items-center" *ngIf="isSelect === 'form'">

            <div class="gcardContainer col-12 col-md-8 col-xl-7">
                <form [formGroup]="DebtorForm" (ngSubmit)="proceed()">
                    <div class="row">
                        <div class=" col-12 col-md-6 col-xl-6 mt-3 " >
                            <mat-label class="gInputLable">Financial Year</mat-label>
                            <mat-select formControlName="defaultYear" class="gInnerInput-border" (selectionChange)="YearOnChange()"
                                (keydown)="keytab($event)">
                                <mat-option class="gSelectOption" *ngFor="let year of fYear" [value]="year.fyear" class="gSelectOption">
                                    {{year.fyear}}
                                </mat-option>
                            </mat-select>
                        </div>
                        <div class=" col-12 col-md-6 col-xl-6 mt-3">
                            <mat-label class="gInputLable">From Date</mat-label>
                            <div class="gOuterInput">
                            <input matInput [min]="minDate" [max]="maxDate" class="gInnerInput" [matDatepicker]="picker"
                                formControlName="fdate"  (keydown)="keytab($event)" autocomplete="off">

                            <mat-datepicker-toggle matSuffix [for]="picker" class="gInputButton">
                                <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                            </mat-datepicker-toggle>
                            <mat-datepicker #picker ></mat-datepicker>
                        </div>
                        </div>
                        <!-- <div style="display: none">
                            <div class="datepicker-footer" #datepickerFooter>
                                <button mat-raised-button color="primary" (click)="today('fdate')">
                                    Today
                                </button>
                            </div>
                        </div> -->
                        <!-- *ngIf="this.DebtorForm.get('fdate').value > this.DebtorForm.get('tdate').value
                                || this.DebtorForm.get('tdate').value < this.DebtorForm.get('fdate').value" -->
                        <div class=" col-12 col-md-6 col-xl-6 mt-3">
                            <mat-label class="gInputLable">To Date</mat-label>
                            <div class="gOuterInput">
                            <input matInput [min]="minDate" [max]="maxDate" class="gInnerInput" [matDatepicker]="picker1"
                                formControlName="tdate"  (keydown)="keytab($event)" autocomplete="off">
                            
                            <mat-datepicker-toggle matSuffix [for]="picker1" class="gInputButton">
                                <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                            </mat-datepicker-toggle>
                            <mat-datepicker #picker1></mat-datepicker>
                            </div>
                            <!-- <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                            <mat-error>Invalid To date.</mat-error>
                            <mat-datepicker #picker1 (opened)="onOpen1()">
                            </mat-datepicker> -->
                        </div>
                        <!-- <div style="display: none">
                            <div class="datepicker-footer" #datepickerFooter1>
                                <button mat-raised-button color="primary" (click)="today('tdate')">
                                    Today
                                </button>
                            </div>
                        </div> -->
                        <div class=" col-12 col-md-6 col-xl-6 mt-3">
                            <mat-label class="gInputLable">State</mat-label>
                            <mat-select formControlName="stateValue" class="gInnerInput-border" (selectionChange)="StateOnChange($event)"
                                (keydown)="keytab($event)">
                                <mat-option class="gSelectOption" *ngFor="let state of stateLoad" [value]="state.state_reg">
                                    {{state.state_reg}}
                                </mat-option>
                            </mat-select>
                        </div>
                        <div class=" col-12 col-md-6 col-xl-6 mt-3" *ngIf="option == 'debtor'">
                            <mat-label class="gInputLable">Location</mat-label>
                            <input type="text" matInput [formControl]="DebtorlocControl" [matAutocomplete]="auto"
                                [(ngModel)]="DLocation" (keydown)="keytab($event)" class="gInnerInput-border">
                            <mat-autocomplete #auto="matAutocomplete" class="gAutoCompleteContainer">
                                <mat-option class="gSelectOption" *ngFor="let branch of DbrhLoad"
                                    (onSelectionChange)="DebtorBranchOnChange($event,branch)" [value]="branch.brname">
                                    {{branch.brname}}
                                </mat-option>
                            </mat-autocomplete>
                        </div>
                        <div class=" col-12 col-md-6 col-xl-6 mt-3" *ngIf="option == 'creditor'">
                            <mat-label class="gInputLable">Finbook</mat-label>
                            <input type="text" matInput [formControl]="CreditorlocControl" class="gInnerInput-border" [matAutocomplete]="auto2"
                                [(ngModel)]="CLocation" (keydown)="keytab($event)">
                            <mat-autocomplete #auto2="matAutocomplete" class="gAutoCompleteContainer">
                                <mat-option class="gSelectOption" *ngFor="let branch of CbrhLoad" class="gSelectOption"
                                    (onSelectionChange)="CreditorBranchOnChange($event,branch)" [value]="branch.FB_ID">
                                    {{branch.FB_ID}}
                                </mat-option>
                            </mat-autocomplete>
                        </div>

                        <div class=" col-12 col-md-6 col-xl-6 mt-3" *ngIf="option == 'debtor'">
                            <mat-label class="gInputLable">Ledger Name</mat-label>
                            <input type="text" matInput [formControl]="debtorControl" class="gInnerInput-border" [matAutocomplete]="auto1"
                                [(ngModel)]="debtor" (keydown)="keytab($event)">
                            <mat-autocomplete #auto1="matAutocomplete"  class="gAutoCompleteContainer">
                                <mat-option class="gSelectOption" *ngFor="let option of debtorList" class="gSelectOption"
                                    (onSelectionChange)="detorOnChange(option)" [value]="option.CustomerName">
                                    {{option.CustomerName}}
                                </mat-option>
                            </mat-autocomplete>
                        </div>

                        <div class=" col-12 col-md-6 col-xl-6 mt-3" *ngIf="option == 'creditor'">
                            <mat-label class="gInputLable">Creditors</mat-label>
                            <input type="text" matInput [formControl]="creditorControl" class="gInnerInput-border" [matAutocomplete]="auto3"
                                [(ngModel)]="creditor" (keydown)="keytab($event)">
                            <mat-autocomplete #auto3="matAutocomplete"  class="gAutoCompleteContainer">
                                <mat-option class="gSelectOption" *ngFor="let option of creditorList" class="gSelectOption"
                                    (onSelectionChange)="creditorOnChange(option)" [value]="option.Suppliername">
                                    {{option.Suppliername}}
                                </mat-option>
                            </mat-autocomplete>
                        </div>

                        <div class=" col-12 col-md-6 col-xl-6 mt-3">
                            <mat-label class="gInputLable">View</mat-label>
                            <mat-select [(value)]="SelectedView" class="gInnerInput-border" (selectionChange)="ViewOnChange($event)"
                                (keydown)="keytab($event)">
                                <mat-option value="Monthly" class="gSelectOption">Monthly</mat-option>
                                <mat-option value="Consolidated" class="gSelectOption">Consolidated</mat-option>
                                <mat-option *ngIf="debtor != 'ALL' && creditor != 'ALL'" value="InvDetailed" class="gSelectOption">Detailed
                                </mat-option>
                            </mat-select>
                        </div>
                        <div class=" col-12 col-md-6 col-xl-6 mt-3" *ngIf="SelectedView === 'Consolidated'">
                            <mat-label class="gInputLable">Option</mat-label>
                            <mat-select [(value)]="SelectedType" class="gInnerInput-border" (keydown)="keytab($event)">
                                <mat-option value="Closing Balance" class="gSelectOption">Closing Balance</mat-option>
                                <mat-option value="OP|DR|CR|CL" class="gSelectOption">OP|DR|CR|CL</mat-option>

                            </mat-select>
                        </div>
                        <div class="text-center spinner-button mt-5 col-md-12">
                            <button mat-button class="gSaveButton" type="submit" [disabled]="loading">
                                Proceed
                                <mat-spinner diameter="20" *ngIf="loading" class="mat-spinner-color">
                                </mat-spinner>
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

    <div class="content " *ngIf="isSelect === 'ListTblMonthly'">
        <div class="">
            <!-- Monthly Table-->
            <div class="row mx-2" *ngIf="option == 'debtor'">
                <div class="col-12 col-md-12">
                    <span class="gInputLable">{{DebtorForm.value.fdate | date:'dd-MMM-yyyy'}} to {{DebtorForm.value.tdate |
                        date:'dd-MMM-yyyy'}} | Reg : {{DebtorForm.value.stateValue}} | Loc :
                        {{branchname}} | Debtors : {{customername}} </span>
                </div>
            </div>
            <div class="row mx-2"  *ngIf="option == 'creditor'">
                <div class="col-12 col-md-12">
                    <span class="gInputLable">{{DebtorForm.value.fdate | date:'dd-MMM-yyyy'}} to {{DebtorForm.value.tdate |
                        date:'dd-MMM-yyyy'}} | Reg : {{DebtorForm.value.stateValue}} | Loc :
                        {{CLocation}} | Creditors : {{CreditorS_name}} </span>
                </div>
            </div>
            <div class="gTableSection mt-2 mx-2">
            <div class="gInnerTable " style="max-height: calc(100vh - 120px);">
                <table class="gNormalTable-sm table" id="info_monthly">
                    <thead>
                        <tr>
                            <th style="width: 5%;min-width: 60px">S.No</th>
                            <th style="width: 10%;min-width: 100px">Particulars</th>
                            <th style="width: 10%;min-width: 80px">Year</th>
                            <th style="width: 5%;min-width: 60px">View</th>
                            <th class="text-end" style="width: 15%;min-width: 200px" *ngIf="option == 'debtor'">Debit</th>
                            <th class="text-end" style="width: 15%;min-width: 200px" *ngIf="option == 'creditor'">Paid</th>
                            <th class="text-end" style="width: 15%;min-width: 200px" *ngIf="option == 'debtor'">Credit</th>
                            <th class="text-end" style="width: 15%;min-width: 200px" *ngIf="option == 'creditor'">Purchased</th>
                            <th class="text-end" style="width: 15%;min-width: 200px">Closing Balance</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngIf="MonthlyData.length > 0">
                            <td></td>

                            <td><b>Opening Balance</b></td>
                            <td></td>
                            <td></td>
                            <td class="text-end">
                                <div *ngIf="openStk > 0 ">
                                    {{openStk.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number}) }}
                                </div>
                            </td>
                            <td class="text-end">
                                <div *ngIf="openstkdr > 0 ">
                                    {{openstkdr.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number}) }}
                                </div>
                            </td>
                            <td class="text-end"></td>
                        </tr>
                        <tr class="pointer" *ngFor="let data of MonthlyData ;let i = index" (click)="highlgtMonth(i)"
                            [class.active]="data.Month == HighlightRow || data == HighlightRow">
                            <ng-container *ngIf="data.Sales != null && data.Receipts != null ">
                                <td>{{i+1}}</td>
                                <td>{{data.Month}}</td>
                                <td>{{data.Year}}</td>
                                <td >
                                    <button (click)="ShowContable(data)" class="gHandIcon" mat-icon-button>
                                        <i class="fa fa-hand-o-right"></i>
                                    </button>
                                </td>
                                <td class="text-end" *ngIf="data.Sales != 0;else nextblock">
                                    {{data.Sales.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number}) }}
                                </td>
                                <ng-template #nextblock>
                                    <td class="text-end"></td>
                                </ng-template>
                                <td class="text-end" *ngIf="data.Receipts != 0;else nextblock1">
                                    {{data.Receipts.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number}) }}
                                </td>
                                <ng-template #nextblock1>
                                    <td class="text-end"></td>
                                </ng-template>
                                <td class="text-end">{{data.Closing}}</td>
                            </ng-container>
                        </tr>
                        <tr *ngIf="MonthlyData.length > 0">
                            <td></td>
                            <td></td>
                            <td><b>Current Total (Rs)</b></td>
                            <td></td>
                            <td class="text-end">
                                <b>{{debittot.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}</b>
                            </td>
                            <td class="text-end">
                                <b>{{credittot.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}</b>
                            </td>
                            <td class="text-end"></td>
                        </tr>
                        <tr *ngIf="MonthlyData.length > 0">
                            <td></td>
                            <td></td>
                            <td *ngIf="option == 'debtor'">
                                <div *ngIf="ClosingReceivable">
                                    <b>Closing Balance Receivable (Rs)</b>
                                </div>
                                <div *ngIf="ClosingPayable">
                                    <b> Closing Balance Payable (Rs)</b>
                                </div>
                                <div *ngIf="closingBal">
                                    <b> Closing Balance (Rs)</b>
                                </div>
                            </td>
                            <td *ngIf="option == 'creditor'">
                                <div *ngIf="ClosingReceivable">
                                    <b>Closing Balance (Rs)</b>
                                </div>
                                <div *ngIf="ClosingPayable">
                                    <b> Closing Balance (Rs)</b>
                                </div>
                                <div *ngIf="closingBal">
                                    <b> Closing Balance (Rs)</b>
                                </div>
                            </td>
                            <td></td>
                            <td class="text-end">
                                <b>{{
                                    ClosingPayable.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}</b>
                            </td>
                            <td class="text-end">
                                <b>{{
                                    ClosingReceivable.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}</b>
                            </td>
                            <td class="text-end">
                                <b>{{closingBal.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}</b>
                            </td>
                        </tr >
                        <tr *ngIf="MonthlyData.length === 0">
<td [colSpan]="9" class="text-center"> No Record found.</td>
                        </tr>
                    </tbody>
                </table>
                <div class="loader" *ngIf="isloader">
                    <mat-spinner diameter="30" color="primary">
                    </mat-spinner>
                </div>
            </div>
        </div>
        </div>
    </div>
    <div class="content " *ngIf="isSelect === 'ListTblConstd'">
        <div class="Accounts2">
            <!--  Consolidated Table -->
            <div class="row mx-2" *ngIf="option == 'debtor'">
                <div class="col-12" *ngIf="MonthFdate && MonthTdate; else next">
                    <span class="gInputLable">{{MonthFdate}} to {{MonthTdate}} | Reg : {{DebtorForm.value.stateValue}} | Loc :
                        {{branchname}} | Debtors : {{customername}}</span>
                </div>
                <ng-template #next>
                    <div class="col-12">
                        <span class="gInputLable">{{DebtorForm.value.fdate | date:'dd-MMM-yyyy'}} to {{DebtorForm.value.tdate
                            | date:'dd-MMM-yyyy'}} | Reg : {{DebtorForm.value.stateValue}} | Loc :
                            {{branchname}} | Debtors : {{customername}} </span>
                    </div>
                </ng-template>
       
            </div>
            <div class="row mx-2" *ngIf="option == 'creditor'">
                <div class=" col-12" *ngIf="MonthFdate && MonthTdate; else next">
                    <span class="gInputLable">{{MonthFdate}} to {{MonthTdate}} | Reg : {{DebtorForm.value.stateValue}} | Loc :
                        {{CLocation}} | Creditors : {{CreditorS_name}}</span>
                </div>
                <ng-template #next>
                    <div class=" col-12">
                        <span class="gInputLable">{{DebtorForm.value.fdate | date:'dd-MMM-yyyy'}} to {{DebtorForm.value.tdate
                            | date:'dd-MMM-yyyy'}} | Reg : {{DebtorForm.value.stateValue}} | Loc :
                            {{CLocation}} | Creditors : {{CreditorS_name}} </span>
                    </div>
                </ng-template>
                
            </div>
            <div class="">
                <div class="gTableSection mx-2">
                    <div class="d-flex  text-end  gTableActionheaders">

                        <form role="search" class="search-form ml-3">
                            <input type="search" name="Search" class="gSearchText" #input [(ngModel)]="searchTemp" autocomplete="off">
                        </form>
                        <img Cores px-0 class="gXlButton " src=".\assets\gImg\excel1.png" type="submit" matTooltip="Excel Export" (click)="consoltdexcel()">


                    </div>
                    <div *ngIf="SelectedType == 'Closing Balance'" class="gInnerTable" style="max-height: calc(100vh - 110px);">
                        <table class="gNormalTable-sm table" *ngIf="option == 'debtor'" id="info_consolidate">
                            <thead>
                                <tr>
                                    <th style="width: 70px;">SNo</th>
                                    <th style="width: auto;">Branch</th>
                                    <th style="width: auto;">Debtors</th>
                                    <th style="width: 200px;">CCode</th>
                                    <th style="width: 50px;" class="text-center">View</th>
                                    <th class="text-end" style="width: 200px;">Payables</th>
                                    <th class="text-end" style="width: 200px;">Receivables</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="pointer" *ngFor="let getItem of ConsolidatedData | filter: searchTemp; let i=index"
                                    [class.active]=" getItem == HighlightRow1" (click)="highlgtCon(i)">
                                    <!-- getItem.Debtors == HighlightRow1 || -->
                                    <td style="width: 70px;">{{i+1}}</td>
                                    <td style="width: auto;">{{getItem.Brname}}</td>
                                    <td  style="width: auto;">{{getItem.Debtors}}</td>
                                    <td style="width: 200px;">{{getItem.CCode}}</td>
                                    <td class="text-center" style="width: 70px;">
                                        <button mat-icon-button (click)="ShowDettable(getItem)" class="gHandIcon">
                                            <i class="fa fa-hand-o-right"></i> </button>
                                       </td>
                                    <td style="width: 200px;" class="text-end" *ngIf="getItem.Payables != 0;else nextblock2">
                                        {{getItem.Payables.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}
                                    </td>
                                    <ng-template #nextblock2>
                                        <td class="text-end"></td>
                                    </ng-template>
                                    <td style="width: 200px;" class="text-end" *ngIf="getItem.Receivables != 0;else nextblock3">
                                        {{getItem.Receivables.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}
                                    </td>
                                    <ng-template #nextblock3>
                                        <td class="text-end"></td>
                                    </ng-template>
                                </tr>
                                <tr class="gToggleFooter">
                                    <td></td>
                                    <td></td>
                                    <td style="max-width: 200px;"><b>Current Total (Rs)</b></td>
                                    <td></td>
                                    <td></td>
                                    <td class="text-end" style="width: 200px;">
                                        <b>{{(payablestot).toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}</b>
                                    </td>
                                    <td class="text-end" style="width: 200px;">
                                        <b>{{(receivabletot).toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}</b>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <table class="gNormalTable-sm table" *ngIf="option == 'creditor'" id="info_consolidate">
                            <thead>
                                <tr>
                                    <th style="width: 5%;">SNo</th>
                                    <th style="width: 41%;">Creditors</th>
                                    <th style="width: 20%" *ngIf="CLocation === 'All'">Finbook</th>
                                    <th style="width: 8%;">CCode</th>
                                    <th style="width: 2%;" class="text-center"><i class="fa fa-hand-o-right"></i></th>
                                    <th class="text-end" style="width: 12%;">Paid </th>
                                    <th class="text-end" style="width: 12%;">Purchased</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="pointer" *ngFor="let getItem of ConsolidatedData; let i=index"
                                    [class.active]=" getItem == HighlightRow1" (click)="highlgtCon(i)">
                                    <!-- getItem.Creditors == HighlightRow1 || -->
                                    <td>{{i+1}}</td>
                                    <td>{{getItem.Creditors}}</td>
                                    <td *ngIf="CLocation === 'All'">{{getItem.Location}}</td>
                                    <td>{{getItem.CCode}}</td>
                                    <td class="text-center" (click)="ShowDettable(getItem)"><span
                                            class="material-icons mi">
                                            skip_next
                                        </span></td>
                                    <td class="text-end" *ngIf="getItem.Payables != 0;else nextblock2">
                                        {{getItem.Payables.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}
                                    </td>
                                    <ng-template #nextblock2>
                                        <td class="text-end"></td>
                                    </ng-template>
                                    <td class="text-end" *ngIf="getItem.Receivables != 0;else nextblock3">
                                        {{getItem.Receivables.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}
                                    </td>
                                    <ng-template #nextblock3>
                                        <td class="text-end"></td>
                                    </ng-template>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td><b>Current Total (Rs)</b></td>
                                    <td></td>
                                    <td *ngIf="CLocation === 'All'"></td>
                                    <td class="text-end">
                                        <b>{{(payablestot).toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}</b>
                                    </td>
                                    <td class="text-end">
                                        <b>{{(receivabletot).toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}</b>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div *ngIf="SelectedType == 'OP|DR|CR|CL'" class="gInnerTable">
                        <table class="gNormalTable-sm table" *ngIf="option == 'debtor'" id="info_consolidate">
                            <thead>
                                <tr>
                                    <th style="width: 5%;">SNo</th>
                                    <th style="width: 32%;">Debtors</th>
                                    <th style="width: 13%;">CCode</th>
                                    <th style="width: 2%;" class="text-center"><i class="fa fa-hand-o-right"></i></th>
                                    <th class="text-end" style="width: 8%;">Opn [Dr]</th>
                                    <th class="text-end" style="width: 8%;">Opn [Cr]</th>
                                    <th class="text-end" style="width: 8%;">Sales</th>
                                    <th class="text-end" style="width: 8%;">Receipts</th>
                                    <th class="text-end" style="width: 8%;">Cls [Dr]</th>
                                    <th class="text-end" style="width: 8%;">Cls [Cr]</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="pointer" *ngFor="let getItem of ConsolidatedData; let i=index"
                                    [class.active]="getItem == HighlightRow1" (click)="highlgtCon(i)">
                                    <!-- getItem.Debtors  == HighlightRow1 ||  -->
                                    <td>{{i+1}}</td>
                                    <td>{{getItem.Debtors}}</td>
                                    <td>{{getItem.CCode}}</td>
                                    <td class="text-center" (click)="ShowDettable(getItem)"><span
                                            class="material-icons mi">
                                            skip_next
                                        </span></td>
                                    <td class="text-end" *ngIf="getItem.OpnPayable != 0;else block1">
                                        {{getItem.OpnPayable.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}
                                    </td>
                                    <ng-template #block1>
                                        <td class="text-end"></td>
                                    </ng-template>
                                    <td class="text-end" *ngIf="getItem.OpnRecvble != 0;else block2">
                                        {{getItem.OpnRecvble.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}
                                    </td>
                                    <ng-template #block2>
                                        <td class="text-end"></td>
                                    </ng-template>
                                    <td class="text-end" *ngIf="getItem.Sales != 0;else block3">
                                        {{getItem.Sales.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}
                                    </td>
                                    <ng-template #block3>
                                        <td class="text-end"></td>
                                    </ng-template>
                                    <td class="text-end" *ngIf="getItem.Receipts != 0;else block4">
                                        {{getItem.Receipts.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}
                                    </td>
                                    <ng-template #block4>
                                        <td class="text-end"></td>
                                    </ng-template>
                                    <td class="text-end" *ngIf="getItem.Payable != 0;else nextblock2">
                                        {{getItem.Payable.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}
                                    </td>
                                    <ng-template #nextblock2>
                                        <td class="text-end"></td>
                                    </ng-template>
                                    <td class="text-end" *ngIf="getItem.Receivable != 0;else nextblock3">
                                        {{getItem.Receivable.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}
                                    </td>
                                    <ng-template #nextblock3>
                                        <td class="text-end"></td>
                                    </ng-template>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td><b>Current Total (Rs)</b></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td class="text-end">
                                        <b>{{(payablestot).toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}</b>
                                    </td>
                                    <td class="text-end">
                                        <b>{{(receivabletot).toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}</b>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <table class="gNormalTable-sm table" *ngIf="option == 'creditor'" id="info_consolidate">
                            <thead>
                                <tr>
                                    <th style="width: 5%;">SNo</th>
                                    <th style="width: 27%;">Creditors</th>
                                    <th style="width: 10%" *ngIf="CLocation === 'All'">Finbook</th>
                                    <th style="width: 8%;">SupCode</th>
                                    <th style="width: 2%;" class="text-center"><i class="fa fa-hand-o-right"></i></th>
                                    <th class="text-end" style="width: 8%;">Opn [Dr]</th>
                                    <th class="text-end" style="width: 8%;">Opn [Cr]</th>
                                    <th class="text-end" style="width: 8%;">Payable</th>
                                    <th class="text-end" style="width: 8%;">Purchase</th>
                                    <th class="text-end" style="width: 8%;">Cls [Dr]</th>
                                    <th class="text-end" style="width: 8%;">Cls [Cr]</th>

                                </tr>
                            </thead>
                            <tbody>
                                <tr class="pointer" *ngFor="let getItem of ConsolidatedData; let i=index"
                                    [class.active]=" getItem == HighlightRow1" (click)="highlgtCon(i)">
                                    <!-- getItem.Creditors == HighlightRow1 || -->
                                    <td>{{i+1}}</td>
                                    <td>{{getItem.Creditors}}</td>
                                    <td *ngIf="CLocation === 'All'">{{getItem.Location}}</td>
                                    <td>{{getItem.Supcode}}</td>
                                    <td class="text-center" (click)="ShowDettable(getItem)"><span
                                            class="material-icons mi">
                                            skip_next
                                        </span></td>
                                    <td class="text-end" *ngIf="getItem.OpnPayment != 0;else blck1">
                                        {{getItem.OpnPayment.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}
                                    </td>
                                    <ng-template #blck1>
                                        <td class="text-end"></td>
                                    </ng-template>
                                    <td class="text-end" *ngIf="getItem.OpnPurchase != 0;else blck2">
                                        {{getItem.OpnPurchase.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}
                                    </td>
                                    <ng-template #blck2>
                                        <td class="text-end"></td>
                                    </ng-template>

                                    <td class="text-end" *ngIf="getItem.Payable != 0;else nextblck2">
                                        {{getItem.Payable.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}
                                    </td>
                                    <ng-template #nextblck2>
                                        <td class="text-end"></td>
                                    </ng-template>
                                    <td class="text-end" *ngIf="getItem.Purchase != 0;else nextblck3">
                                        {{getItem.Purchase.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}
                                    </td>
                                    <ng-template #nextblck3>
                                        <td class="text-end"></td>
                                    </ng-template>
                                    <td class="text-end" *ngIf="getItem.ClosingPayble != 0;else nextblck4">
                                        {{getItem.ClosingPayble.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}
                                    </td>
                                    <ng-template #nextblck4>
                                        <td class="text-end"></td>
                                    </ng-template>
                                    <td class="text-end" *ngIf="getItem.ClosingPurchase != 0;else nextblck5">
                                        {{getItem.ClosingPurchase.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}
                                    </td>
                                    <ng-template #nextblck5>
                                        <td class="text-end"></td>
                                    </ng-template>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td><b>Current Total (Rs)</b></td>
                                    <td></td>
                                    <td *ngIf="CLocation === 'All'"></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td class="text-end">
                                        <b>{{(payablestot).toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}</b>
                                    </td>
                                    <td class="text-end">
                                        <b>{{(receivabletot).toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}</b>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="loader" *ngIf="isloader">
                    <mat-spinner diameter="30" color="primary">
                    </mat-spinner>
                </div>
            </div>
        </div>
    </div>
    <div class="content " *ngIf="isSelect ==='ListTblDetailed'">
        <div class="Accounts3">
            <!--  Detailed Table -->
            <div class="row mx-2" *ngIf="option == 'debtor'">
                <div class="col-10 col-md-10"
                    *ngIf="value != 'Detailed' && SelectedView =='InvDetailed'; else nextblock">
                    <span class="gInputLable" > Debtors : {{customername}} | {{DebtorForm.value.fdate | date:'dd-MMM-yyyy'}} to
                        {{DebtorForm.value.tdate | date:'dd-MMM-yyyy'}} | Reg :
                        {{DebtorForm.value.stateValue}} | Loc :
                        {{branchname}} </span>
                </div>
                <ng-template #nextblock>
                    <div class="col-10 col-md-10"
                        *ngIf="value == 'Detailed' && SelectedView =='InvDetailed'; else nextblock45">
                        <span class="gInputLable" >Debtors : {{debtorname}} | {{DebtorForm.value.fdate | date:'dd-MMM-yyyy'}}
                            to
                            {{DebtorForm.value.tdate | date:'dd-MMM-yyyy'}} | Reg : {{DebtorForm.value.stateValue}} |
                            Loc :
                            {{debtorLoc}}</span>
                    </div>
                </ng-template>
                <ng-template #nextblock45>
                    <div class="col-10 col-md-10">
                        <span class="gInputLable">Debtors : {{debtorname}} | {{MonthFdate}} to {{MonthTdate}} | Reg :
                            {{DebtorForm.value.stateValue}} | Loc :
                            {{debtorLoc}}</span>
                    </div>
                </ng-template>

                <div class="gTableSection col-12 col-md-12">
                    <div class="d-flex  text-end  gTableActionheaders">

                        <form role="search" class="search-form ml-3">
                            <input type="search" name="Search" class="gSearchText" #input [(ngModel)]="searchTemp" autocomplete="off">
                        </form>
                        <img Cores px-0 class="gXlButton " src=".\assets\gImg\excel1.png" type="submit" matTooltip="Excel Export" (click)="Detailedexcel()">


                    </div>
                    <div class="gInnerTable">
                        <table class="gNormalTable-sm table" id="info_detailed">
                            <thead>
                                <tr>
                                    <th style="width: 10%;">S.No</th>

                                    <th style="width: 10%;">Date</th>
                                    <th style="width: 53%;">Particulars</th>
                                    <th style="width: 15%;">Trans</th>
                                    <th class="text-end" style="width: 10%;">Debit</th>
                                    <th class="text-end" style="width: 10%;">Credit</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let getItem of DetailedData| filter: searchTemp; let i = index" class="pointer"
                                    [class.active]="getItem == HighlightRow2" (click)="highlgtdet(i)">
                                    <ng-container *ngIf="getItem.Sales != null && getItem.Receipts != null">
                                        <td>{{i+1 ?? ''}}</td>
                                        <td>{{getItem.Dbtdate | date:'dd-MMM-yyyy'}}</td>
                                        <td>{{getItem.Particulars}}</td>
                                        <td>{{getItem.Trans}}</td>


                                        <td class="text-end" *ngIf="getItem.Sales  != 0 ;else nextblock4">
                                            {{getItem.Sales.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}
                                        </td>

                                        <td class="text-end" *ngIf="getItem.Receipts != 0;else nextblock5">
                                            {{getItem.Receipts.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}
                                        </td>

                                        <!-- <ng-template #nextblock5>
                                            <td class="text-end"></td>
                                        </ng-template> -->
                                    </ng-container>
                                </tr>
                                <tr *ngIf="DetailedData.length === 0">
                                    <td [colspan]="6">No Record Found</td> </tr>
                                <tr class="gToggleFooter" *ngIf="DetailedData.length > 0">
                                    <td></td>
                                    <td></td>
                                    <td>
                                        <div *ngIf="OpenBalreceivable">
                                            <b>Opening Balance Receivable (Rs)</b>
                                        </div>
                                        <div *ngIf="OpenBalpayable">
                                            <b>Opening Balance Payable (Rs)</b>
                                        </div>
                                        <div *ngIf="openingAmt === 0">
                                            <b>Opening Balance (Rs)</b>
                                        </div>
                                    </td>

                          

                                    <td *ngIf="OpenBalpayable" class="text-end">
                                        <b>{{
                                            OpenBalpayable.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}</b>
                                    </td>
                                    <td></td>
                                    <td class="text-end">
                                        <div *ngIf="OpenBalreceivable">
                                            <b>{{
                                                OpenBalreceivable.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}</b>
                                        </div>
                                        <div *ngIf="openingAmt === 0">
                                            <b>{{openingAmt.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}</b>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="gToggleFooter" *ngIf="DetailedData.length > 0">
                                    <td></td>
                                    <td></td>
                                    <td><b>Current Total (Rs)</b></td>
                                    <td></td>

                                    <td class="text-end">
                                        <b>{{detsalestot.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}</b>
                                    </td>

                                    <td class="text-end">
                                        <b>{{detreceipttot.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}</b>
                                    </td>

                                </tr>
                                <tr class="gToggleFooter" *ngIf="DetailedData.length > 0">
                                    <td></td>
                                    <td></td>
                                    <td>
                                        <div *ngIf="InvDetailedreceivable">
                                            <b>Closing Balance Receivable (Rs)</b>
                                        </div>
                                        <div *ngIf="InvDetailedpayable">
                                            <b> Closing Balance Payable (Rs)</b>
                                        </div>
                                        <div *ngIf="InvDetailedcloBal === 0">
                                            <b> Closing Balance (Rs)</b>
                                        </div>
                                    </td>

                                    <td></td>

                                    <td *ngIf="InvDetailedpayable" class="text-end">
                                        <b>{{InvDetailedpayable.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}</b>
                                    </td>
                                 
                                    <td class="text-end">
                                        <div *ngIf="InvDetailedreceivable">
                                            <b>{{InvDetailedreceivable.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}</b>
                                        </div>
                                        <div *ngIf="InvDetailedcloBal === 0">
                                            <b>{{InvDetailedcloBal.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}</b>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="loader" *ngIf="isloader">
                            <mat-spinner diameter="30" color="primary">
                            </mat-spinner>
                        </div>
                    </div>
                </div>
            </div>



            <div class="row mx-2" *ngIf="option == 'creditor'">
                <div class="col-10 col-md-10"
                    *ngIf="value != 'Detailed' && SelectedView =='InvDetailed'; else nextblock50">
                    <span class="gInputLable">Creditors : {{CreditorS_name}} | {{DebtorForm.value.fdate |
                        date:'dd-MMM-yyyy'}} to {{DebtorForm.value.tdate | date:'dd-MMM-yyyy'}} | Reg :
                        {{DebtorForm.value.stateValue}} | Loc :
                        {{CLocation}} </span>
                </div>
                <ng-template #nextblock50>
                    <div class="col-10 col-md-10"
                        *ngIf="value == 'Detailed' && SelectedView =='InvDetailed'; else nextblock100">
                        <span class="gInputLable">Creditors : {{creditorname}} | {{DebtorForm.value.fdate |
                            date:'dd-MMM-yyyy'}} to {{DebtorForm.value.tdate | date:'dd-MMM-yyyy'}} | Reg :
                            {{DebtorForm.value.stateValue}} | Loc :
                            {{credLocation}} </span>
                    </div>
                </ng-template>
                <ng-template #nextblock100>
                    <div class="col-10 col-md-10">
                        <span class="gInputLable">Creditors : {{creditorname}} | {{MonthFdate}} to {{MonthTdate}} | Reg :
                            {{DebtorForm.value.stateValue}} | Loc :
                            {{credLocation}}</span>
                    </div>
                </ng-template>
                <div class="col-2 col-md-2 text-end">
                    <i class="fa fa-file-excel-o" (click)="Detailedexcel()"></i>
                </div>
                <div class="gTableSection col-12 col-md-12">
                    <div class="gInnerTable">
                        <table class="gNormalTable-sm table" id="info_detailed">
                            <thead>
                                <tr>
                                    <th style="width: 10%;">Date</th>
                                    <th style="width: 53%;">Particulars</th>
                                    <th style="width: 15%;">Trans</th>
                                    <th></th>
                                    <th class="text-end" style="width: 10%;">Paid
                                    </th>
                                    <th class="text-end" style="width: 10%;">Purchased
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let getItem of DetailedData; let i = index" class="pointer"
                                    [class.active]="getItem == HighlightRow2" (click)="highlgtdet(i)">
                                    <ng-container *ngIf="getItem.Sales != null && getItem.Receipts != null">
                                        <td>{{getItem.Dbtdate | date:'dd-MMM-yyyy'}}</td>
                                        <td>{{getItem.Particulars}}</td>
                                        <td>{{getItem.Trans}}</td>
                                        <td *ngIf="option == 'creditor'" class="text-center"
                                            (click)="ShowLedgerDetails(getItem)"><span class="material-icons mi">
                                                skip_next
                                            </span></td>


                                        <td class="text-end" *ngIf="getItem.Receipts  != 0;else nextblock4">
                                            {{getItem.Receipts.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}
                                        </td>
                                        <ng-template #nextblock4>
                                            <td class="text-end"></td>
                                        </ng-template>

                                        <td class="text-end" *ngIf="getItem.Sales != 0;else nextblock5">
                                            {{getItem.Sales.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}
                                        </td>
                                        <ng-template #nextblock5>
                                            <td class="text-end"></td>
                                        </ng-template>
                                    </ng-container>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td *ngIf="option == 'creditor'">
                                        <div *ngIf="OpenBalpayable">
                                            <b>Opening Balance (Rs)</b>
                                        </div>
                                        <div *ngIf="OpenBalreceivable">
                                            <b>Opening Balance (Rs)</b>
                                        </div>
                                        <div *ngIf="openingAmt === 0">
                                            <b>Opening Balance (Rs)</b>
                                        </div>
                                    </td>
                                    <td></td>
                                    <td></td>
                                    <td *ngIf="OpenBalpayable" class="text-end">
                                        <b>{{
                                            OpenBalpayable.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}</b>
                                    </td>
                                    <td></td>
                                    <td class="text-end">
                                        <div *ngIf="OpenBalreceivable">
                                            <b>{{
                                                OpenBalreceivable.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}</b>
                                        </div>
                                        <div *ngIf="openingAmt === 0">
                                            <b>{{openingAmt.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}</b>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td><b>Current Total (Rs)</b></td>
                                    <td></td>
                                    <td></td>

                                    <td class="text-end">
                                        <b>{{detreceipttot.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}</b>
                                    </td>

                                    <td class="text-end">
                                        <b>{{detsalestot.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}</b>
                                    </td>
                                </tr>
                                <tr>
                                    <td></td>

                                    <td *ngIf="option=='creditor'">
                                        <div *ngIf="InvDetailedpayable">
                                            <b> Closing Balance (Rs)</b>
                                        </div>
                                        <div *ngIf="InvDetailedreceivable">
                                            <b>Closing Balance (Rs)</b>
                                        </div>
                                        <div *ngIf="InvDetailedcloBal === 0">
                                            <b> Closing Balance (Rs)</b>
                                        </div>
                                    </td>
                                    <td></td>
                                    <td *ngIf="option == 'creditor'"></td>
                                    <td *ngIf="InvDetailedpayable" class="text-end">
                                        <b>{{InvDetailedpayable.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}</b>
                                    </td>
                                    <td></td>
                                    <td class="text-end">
                                        <div *ngIf="InvDetailedreceivable">
                                            <b>{{InvDetailedreceivable.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}</b>
                                        </div>
                                        <div *ngIf="InvDetailedcloBal === 0">
                                            <b>{{InvDetailedcloBal.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}</b>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="loader" *ngIf="isloader">
                            <mat-spinner diameter="30" color="primary">
                            </mat-spinner>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div [style.display]="showModal ? 'block' : 'none'" class="modal backdrop" id="exampleModalCenter" tabindex="-1"
        role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true" *ngIf="option =='creditor'">
        <div class="modal-dialog modalitem">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{{DocType}}</h5><br>
                    <button type="button" class="btn-close" (click)="hide()" data-dismiss="modal" aria-label="Close">
                    </button>
                </div>
                <div class="modal-body">
                    <div class="col-sm-12 col-sm-12 col-md-12">
                        <div class="row mb">
                            <div class="col-12 col-md-4">
                                <label for="from" class="label">Date : <span class="caption">{{Trndate}}</span></label>
                            </div>
                        </div>
                        <div class="row mb">
                            <div class="col-12 col-md-4">
                                <label for="to" class="label"
                                    *ngIf="TranType === 'Purchase' || TranType === 'DR_Note' || TranType == 'Rev_Purchase' || TranType === 'CR_Note'">Tran
                                    No :
                                    <span class="caption">{{Trnno}}</span>
                                </label>
                                <label for="to" class="label"
                                    *ngIf="TranType === 'Adjustment' || TranType === 'Payment'">Voucher No :
                                    <span class="caption">{{Trnno}}</span>
                                </label>
                            </div>
                            <div class="col-12 col-md-4">
                                <label for="to" class="label">Fb Id :
                                    <span class="caption">{{fbid}}</span> </label>
                            </div>
                            <div class="col-12 col-md-4" *ngIf="TranType === 'Payment'">
                                <label for="from" class="label">UTR No :
                                    <span class="caption">{{utrno}}</span>
                                </label>
                            </div>
                            <div class="col-12 col-md-4" *ngIf="TranType != 'Payment'">

                            </div>
                            <div class="col-12 col-md-4">
                                <label for="to" class="label">Supname :
                                    <span class="caption">{{CreditorS_name}}</span>
                                </label>
                            </div>
                            <div class="col-12 col-md-4" *ngIf="TranType === 'Purchase' || TranType == 'Rev_Purchase'">
                                <label for="to" class="label">Invoice No :
                                    <span class="caption">{{Invno}}</span>
                                </label>
                            </div>
                            <div class="col-12 col-md-4" *ngIf="TranType === 'DR_Note' || TranType === 'CR_Note'">
                                <label for="to" class="label">Ref Docno :
                                    <span class="caption">{{Invno}}</span>
                                </label>
                            </div>
                            <div class="col-12 col-md-4" *ngIf="TranType === 'Payment'">
                                <label for="from" class="label">Pay Batch No :
                                    <span class="caption">{{PBno}}</span>
                                </label>
                            </div>
                            <div class="col-12 col-md-4">
                                <label for="to" class="label">Total Amt :
                                    <span
                                        class="caption">{{totamt.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-12 col-sm-12 col-md-12">
                        <div class="gTableSection">
                            <div class="gInnerTable">
                                <table class="gNormalTable-sm table">
                                    <thead>
                                        <tr
                                            *ngIf="TranType === 'Purchase' || TranType === 'DR_Note' || TranType == 'Rev_Purchase'|| TranType == 'CR_Note'">
                                            <th>Sno</th>
                                            <th
                                                *ngIf="DocType != 'Expense Invoice' && DocType != 'Supplier Account Based Dr. Note' && DocType != 'Supplier Account Based Cr. Note'&& DocType != 'Reversal Expense Invoice'">
                                                Icode</th>
                                            <th
                                                *ngIf="DocType != 'Expense Invoice' && DocType != 'Supplier Account Based Dr. Note'&& DocType != 'Supplier Account Based Cr. Note' && DocType != 'Reversal Expense Invoice'">
                                                Iname</th>
                                            <th
                                                *ngIf="DocType != 'Expense Invoice' && DocType != 'Supplier Account Based Dr. Note' && DocType != 'Supplier Account Based Cr. Note'&& DocType != 'Reversal Expense Invoice'">
                                                InvQty</th>
                                            <th
                                                *ngIf="DocType != 'Expense Invoice' && DocType != 'Supplier Account Based Dr. Note'&& DocType != 'Supplier Account Based Cr. Note' && DocType != 'Reversal Expense Invoice'">
                                                Uom</th>
                                            <th class="text-end"
                                                *ngIf="DocType != 'Expense Invoice' && DocType != 'Supplier Account Based Dr. Note'&& DocType != 'Supplier Account Based Cr. Note' && DocType != 'Reversal Expense Invoice'">
                                                Rate</th>
                                            <th
                                                *ngIf="DocType === 'Expense Invoice' || DocType === 'Supplier Account Based Dr. Note' ||  DocType === 'Reversal Expense Invoice' || DocType === 'Supplier Account Based Cr. Note'">
                                                Usage</th>
                                            <th class="text-end">Amount </th>
                                        </tr>
                                        <tr *ngIf="TranType === 'Adjustment' || TranType === 'Payment'">
                                            <th>Sno</th>
                                            <th>Ref Document No</th>
                                            <th *ngIf="TranType === 'Adjustment'">Status</th>
                                            <th class="text-end">Amount</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let getItem of LedgerDetailList; let i = index" class="pointer">
                                            <td>{{i+1}}</td>
                                            <ng-container
                                                *ngIf="TranType === 'Purchase' || TranType === 'DR_Note' || TranType == 'Rev_Purchase' || TranType == 'CR_Note'">
                                                <td
                                                    *ngIf="DocType != 'Expense Invoice' && DocType != 'Supplier Account Based Dr. Note'&& DocType != 'Supplier Account Based Cr. Note'&& DocType != 'Reversal Expense Invoice'">
                                                    {{getItem.Icode}}</td>
                                                <td
                                                    *ngIf="DocType != 'Expense Invoice' && DocType != 'Supplier Account Based Dr. Note'&& DocType != 'Supplier Account Based Cr. Note'&& DocType != 'Reversal Expense Invoice'">
                                                    {{getItem.Iname}}</td>
                                                <td
                                                    *ngIf="DocType != 'Expense Invoice' && DocType != 'Supplier Account Based Dr. Note'&& DocType != 'Supplier Account Based Cr. Note'&& DocType != 'Reversal Expense Invoice' && (TranType === 'Purchase' || TranType == 'Rev_Purchase')">
                                                    {{getItem.InvQty}}</td>
                                                <td
                                                    *ngIf="DocType != 'Expense Invoice' && DocType != 'Supplier Account Based Dr. Note'&& DocType != 'Supplier Account Based Cr. Note'&& DocType != 'Reversal Expense Invoice'&& TranType === 'DR_Note'">
                                                    {{getItem.Qty}}</td>
                                                <td
                                                    *ngIf="DocType != 'Expense Invoice' && DocType != 'Supplier Account Based Dr. Note'&& DocType != 'Supplier Account Based Cr. Note'&& DocType != 'Reversal Expense Invoice'">
                                                    {{getItem.Uom}}</td>
                                                <td class="text-end"
                                                    *ngIf="DocType != 'Expense Invoice' && DocType != 'Supplier Account Based Dr. Note'&& DocType != 'Supplier Account Based Cr. Note'&& DocType != 'Reversal Expense Invoice'">
                                                    {{getItem.Rate}}</td>
                                                <td
                                                    *ngIf="DocType === 'Expense Invoice' || DocType === 'Supplier Account Based Dr. Note' ||  DocType === 'Reversal Expense Invoice' ||  DocType === 'Supplier Account Based Cr. Note'">
                                                    {{getItem.Usage}}</td>
                                                <td class="text-end">
                                                    {{getItem.Amount.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}
                                                </td>
                                            </ng-container>
                                            <ng-container *ngIf="TranType === 'Payment'">
                                                <td>{{getItem.RefDocno}}</td>
                                                <td class="text-end">
                                                    {{getItem.DocAmt.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}
                                                </td>
                                            </ng-container>
                                            <ng-container *ngIf="TranType === 'Adjustment'">
                                                <td>{{getItem.RefDocNo}}</td>
                                                <td>{{getItem.Stat}}</td>
                                                <td class="text-end">
                                                    {{getItem.RefDocAmt.toLocaleString('en-IN',{minimumFractionDigits:number,maximumFractionDigits:number})}}
                                                </td>
                                            </ng-container>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- 
    <div class="content" *ngIf="isSelect ==='LedgerDetails'">
        <div class="Accounts4">
            
            <div class="row">
                <div class="col-10 col-md-10">
                    <h4 class="heading"> </h4>
                </div> 
            </div>
            <div class="table-responsive">
                <div class="fixed-header">
                    <table class="table table-borderless det" id="info_detailed">
                        <thead>
                            <tr>
                                <th style="width: 10%;">Icode</th>
                                <th style="width: 53%;">Iname</th>
                                <th style="width: 15%;">InvQty</th>
                                <th style="width: 5%;">Uom</th>   
                                <th class="text-end" style="width: 10%;">Rate</th>
                                <th class="text-end" style="width: 10%;">Amount </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let getItem of LedgerDetailList; let i = index" class="pointer"
                                [class.active]="getItem == HighlightRow2" (click)="highlgtdet(i)">
                                <ng-container *ngIf="getItem.Sales != null && getItem.Receipts != null">
                                    <td>{{getItem.Icode | date:'dd-MMM-yyyy'}}</td>
                                    <td>{{getItem.Iname}}</td>                
                                    <td>{{getItem.InvQty}}</td>
                                    <td>{{getItem.Uom}}</td>
                                    <td>{{getItem.Rate}}</td>                
                                    <td>{{getItem.InvAmt}}</td>                
                                </ng-container>
                            </tr>
                           
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div> -->
</div>