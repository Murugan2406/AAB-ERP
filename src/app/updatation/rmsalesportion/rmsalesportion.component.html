<div class="gWrapper">
    <app-header back="true" (BackClick)="backNavigation()" Titleheader="RMS Sales Report"></app-header>

    <!-- <div class="header">
        <mat-toolbar color="warn">
            <mat-toolbar-row>
                <button mat-button (click)="backNavigation()"> BACK</button>
                <span class="example-spacer"></span>
                <span class="example-spacer"></span>
                <button mat-button (click)="homeNavigate()">
                    <span class="material-icons">home</span>
                </button>
                <button mat-button disabled>
                    <img class="png-icon" src=".\assets\gImg\a2b2.png" style="max-width: 56px; min-width: 56px;">
                </button>
            </mat-toolbar-row>
        </mat-toolbar>
    </div> -->

    <div class="content">

        <div class="example-container" *ngIf="selection === 'SWAP'">
            <div class="container  gcardContainer" id="ordertype">

                <div class="d-flex justify-content-center">
                    <div class="p-2  col-xl-3 col-lg-3 col-md-5 col-4">
                        <label class="gInputLable text-center">Item Code</label>
                    </div>
                    <div class="p-2  col-xl-4 col-lg-4 col-md-7 col-8">
                        <div class="row">
                            <div class=" col-6">
                                <input type="text" [(ngModel)]="itemCode" class="gInnerInput-border " autocomplete="off"
                                    (keypress)="restrictNumeric($event)" (keydown)="getItemByCode($event,'icode')"
                                    id="icode" name="code">
                            </div>
                            <div class=" col-3">
                                <button id="itemDetail" (click)="getItemDetails()" class="gSaveButton">
                                    <i class="fa fa-angle-double-right" aria-hidden="true"></i>
                                </button>
                            </div>
                            <div class=" col-3">
                                <button id="itemsrch" (click)="getSearch()" class="gSaveButton">
                                    <i class="fa fa-search" aria-hidden="true"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="d-flex justify-content-center">
                    <div class="p-2  col-xl-3 col-lg-3 col-md-5 col-4">
                        <label class="gInputLable text-center">Item Name</label>
                    </div>
                    <div class="p-2  col-xl-4 col-lg-4 col-md-7 col-8">
                        <input type="text" readonly [(ngModel)]="iname" class="gInnerInput-border disabled"
                            id="itemsearch2" aria-label="Number">
                    </div>
                </div>
                <div class="d-flex justify-content-center">
                    <div class="p-2  col-xl-3 col-lg-3 col-md-5 col-4"></div>
                    <div class="p-2  col-xl-4 col-lg-4 col-md-7 col-8">
                        <div class="row">
                            <div class=" col-3">
                                <button id="itemAdd" class="gSaveButton" (click)="addNewSwapmodal()">Add</button>
                            </div>
                            <div class=" col-3">
                                <button id="itemsrch" class="gSaveButton" (click)="clearForm()">Clear</button>
                            </div>
                            <div class=" col-3">
                                <button id="itemswap" class="gSaveButton" (click)="checkSwapOptions()">Save</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="gTableSection" style="margin-top: 5px;margin-bottom: 20px;">
                    <div id="table-scroll" class="gInnerTable"
                        [ngClass]="{ 'table-scroll': listlen >=16 ,'tablehideScroll': 16 > listlen } ">
                        <table id="main-table" class="gNormalTable-sm table">
                            <thead>
                                <tr>
                                    <th class="text-center">Sno</th>
                                    <th>Item Code</th>
                                    <th>Item Name</th>
                                    <th style="text-align: center;">Delete</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let item of individuals;let i=index">
                                    <td class="text-center">{{i+1}}</td>
                                    <td>{{item.SubIcode}}</td>
                                    <td>{{item.SubIName}}</td>
                                    <td style="text-align: center;">
                                        <button mat-icon-button class="gDeleteIcon" (click)="removeSwapItem(i)">
                                            <mat-icon>delete</mat-icon>
                                        </button>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <div class="example-container" *ngIf="selection === 'BULKUPDATE'">
            <div class="row d-flex justify-content-center" style="margin-top: 5px;">
                <span class="gInputLable text-center mb-0">CHANGE ITEM FOR ALL SETS</span>
            </div>
            <div class="row">
                <div class="col-12 col-md-12 col-lg-6 col-xl-6">
                    <mat-card class="gcardContainer">
                        <mat-card-content>
                            <div class="row d-flex justify-content-center" style="margin-top: 5px;">
                                <span class="gInputLable text-center mb-0">Remove Item</span>
                            </div>
                            <div class="row" *ngIf="ritemSearch">
                                <div class="col-3"></div>
                                <mat-form-field class="col-9 example-full-width">
                                    <mat-label>Item Name</mat-label>
                                    <input type="text" id="name0search" aria-label="Number" matInput
                                        [formControl]="searchRecipe" [matAutocomplete]="auto">
                                    <mat-autocomplete #auto="matAutocomplete" class="gAutoCompleteContainer"
                                        (optionSelected)='getSelectedRIcode($event.option.viewValue)'>
                                        <mat-option *ngFor="let item of recipItems" [value]="item?.iname"
                                            class="gSelectOption">
                                            {{ item?.iname }}
                                        </mat-option>
                                    </mat-autocomplete>
                                </mat-form-field>
                            </div>
                            <div class="d-flex ">
                                <div class="p-2  col-xl-3 col-lg-3 col-md-5 col-4">
                                    <label class="gInputLable text-center">Item Code</label>
                                </div>
                                <div class="p-2  col-xl-9 col-lg-9 col-md-7 col-8">
                                    <div class="row">
                                        <div class=" col-6">
                                            <input type="text" [(ngModel)]="ritemCode"
                                                (keypress)="restrictNumeric($event)" autocomplete="off"
                                                (keydown)="getItemByCode($event,'ricode')" name='Code0' id="Code0"
                                                class="gInnerInput-border" />
                                        </div>
                                        <div class=" col-3">
                                            <button id="ritemDetail" class="gSaveButton " (click)="getReceipeDetails()">
                                                <i class="fa fa-angle-double-right" aria-hidden="true"></i>
                                            </button>
                                        </div>
                                        <div class=" col-3">
                                            <button id="itemsrch2" class="gSaveButton " (click)="selectSearchTwo()">
                                                <i class="fa fa-search" aria-hidden="true"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="d-flex ">
                                <div class="p-2  col-xl-3 col-lg-3 col-md-5 col-4">
                                    <label class="gInputLable text-center">Item Name</label>
                                </div>
                                <div class="p-2  col-xl-9 col-lg-9 col-md-7 col-8">
                                    <input type="text" name='riname' disabled [(ngModel)]="riname"
                                        class="gInnerInput-border disabled " />
                                </div>
                            </div>
                            <div class="d-flex ">
                                <div class="p-2  col-xl-3 col-lg-3 col-md-5 col-4">
                                    <label class="gInputLable text-center">Uom</label>
                                </div>
                                <div class="p-2  col-xl-9 col-lg-9 col-md-7 col-8">
                                    <div class="row">
                                        <div class=" col-5">
                                            <input type="text" name='Uom0' disabled [(ngModel)]="ritemUom"
                                                class="gInnerInput-border disabled " />
                                        </div>
                                        <div class=" col-2"></div>
                                        <div class=" col-2"></div>
                                    </div>
                                </div>
                            </div>
                        </mat-card-content>
                    </mat-card>
                </div>

                <div class="col-12 col-md-12 col-lg-6 col-xl-6">
                    <mat-card class="gcardContainer ">
                        <mat-card-content>
                            <div class="row d-flex justify-content-center" style="margin-top: 5px;">
                                <span class="gInputLable text-center mb-0">Add Item</span>
                            </div>
                            <div class="row" *ngIf="isAdditem">
                                <div class="col-3"></div>
                                <mat-form-field class="col-9 example-full-width">
                                    <mat-label>Item Name</mat-label>
                                    <input type="text" id="name3search" aria-label="Number" matInput
                                        [formControl]="addItemsearch" [matAutocomplete]="auto3">
                                    <mat-autocomplete #auto3="matAutocomplete" class="gAutoCompleteContainer"
                                        (optionSelected)='getSelectedaddIcode($event.option.viewValue)'>
                                        <mat-option *ngFor="let item of addItems" [value]="item?.iname"
                                            class="gSelectOption">
                                            {{ item?.iname }}
                                        </mat-option>
                                    </mat-autocomplete>
                                </mat-form-field>
                            </div>
                            <div class="d-flex ">
                                <div class="p-2  col-xl-3 col-lg-3 col-md-5 col-4">
                                    <label class="gInputLable text-center">Item Code</label>
                                </div>
                                <div class="p-2  col-xl-9 col-lg-9 col-md-7 col-8">
                                    <div class="row">
                                        <div class=" col-6">
                                            <input type="text" class="gInnerInput-border " id="addicode"
                                                autocomplete="off" (keypress)="restrictNumeric($event)"
                                                (keydown)="getItemByCode($event,'addicode')" [(ngModel)]="additemcode"
                                                name="addicode">
                                        </div>
                                        <div class=" col-3">
                                            <button id="additemDetail" class="gSaveButton"
                                                (click)="getaddReceipeDetails()">
                                                <i class="fa fa-angle-double-right" aria-hidden="true"></i>
                                            </button>
                                        </div>
                                        <div class=" col-3">
                                            <button id="additemsrch" class="gSaveButton" (click)="addselectSearchTwo()">
                                                <i class="fa fa-search" aria-hidden="true"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="d-flex ">
                                <div class="p-2  col-xl-3 col-lg-3 col-md-5 col-4">
                                    <label class="gInputLable text-center">Item Name</label>
                                </div>
                                <div class="p-2  col-xl-9 col-lg-9 col-md-7 col-8">
                                    <input type="text" readonly class="gInnerInput-border disabled"
                                        [(ngModel)]="addIname" id="additemsearch2" aria-label="Number">
                                </div>
                            </div>
                            <div class="d-flex ">
                                <div class="p-2  col-xl-3 col-lg-3 col-md-5 col-4">
                                    <label class="gInputLable text-center">Uom</label>
                                </div>
                                <div class="p-2  col-xl-9 col-lg-9 col-md-7 col-8">
                                    <div class="row">
                                        <div class=" col-5">
                                            <input type="text" readonly class="gInnerInput-border disabled"
                                                [(ngModel)]="addiUom" id="adduom" name="adduom">
                                        </div>
                                        <div class=" col-3">
                                            <button id="bikupdate" (click)="checkBulkOptions()"
                                                class="gSaveButton">Update</button>
                                        </div>
                                        <div class=" col-3">
                                            <button id="clrForm" class="gSaveButton"
                                                (click)="clearForm()">Clear</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </mat-card-content>
                    </mat-card>
                </div>
            </div>

            <div class="row d-flex justify-content-center" style="margin-top: 5px;">
                <span class="gInputLable text-center mb-0">Recipe For Following Items</span>
            </div>

            <div class="gTableSection" style="margin-top: 5px;margin-bottom: 20px;">
                <div id="table-scroll" class="gInnerTable"
                    [ngClass]="{ 'table-scroll': listlen >=10 ,'tablehideScroll': 10 > listlen } ">
                    <table id="main-table" class="gNormalTable-sm table">
                        <thead>
                            <tr>
                                <th class="text-center">Sno</th>
                                <th>Item Code</th>
                                <th>Item Name</th>
                                <th class="text-end">Qty</th>
                                <th>Uom</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let item of individuals;let i=index">
                                <td class="text-center">{{i+1}}</td>
                                <td>{{item.fgcode}}</td>
                                <td>{{item.fginame}}</td>
                                <td class="text-end">{{item.rqty}}</td>
                                <td>{{item.ruom}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>



        <div class="example-container" *ngIf="selection === 'RMSAVE'">
            <div class="row d-flex justify-content-center" style="margin-top: 5px;">
                <span class="gInputLable text-center mb-0">RAW MATERIAL SET PREPARATION</span>
            </div>
            <div class="row d-flex justify-content-center">
                <span class="gInputLable text-center mb-0">[For One Set Standard]</span>
            </div>
            <div class="container  gcardContainer" id="ordertype">

                <div class="d-flex justify-content-center">
                    <div class="p-2  col-xl-3 col-lg-3 col-md-5 col-4">
                        <label class="gInputLable text-center">Item Code</label>
                    </div>
                    <div class="p-2  col-xl-4 col-lg-4 col-md-7 col-8">
                        <div class="row">
                            <div class=" col-6">
                                <input type="text" [(ngModel)]="itemCode" class="gInnerInput-border " autocomplete="off"
                                    (keypress)="restrictNumeric($event)" (keydown)="getItemByCode($event,'icode')"
                                    id="icode" name="code">
                            </div>
                            <div class=" col-3">
                                <button id="itemDetail" (click)="getItemDetails()" class="gSaveButton">
                                    <i class="fa fa-angle-double-right" aria-hidden="true"></i>
                                </button>
                            </div>
                            <div class=" col-3">
                                <button id="itemsrch" (click)="getSearch()" class="gSaveButton">
                                    <i class="fa fa-search" aria-hidden="true"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="d-flex justify-content-center">
                    <div class="p-2  col-xl-3 col-lg-3 col-md-5 col-4">
                        <label class="gInputLable text-center">Item Name</label>
                    </div>
                    <div class="p-2  col-xl-4 col-lg-4 col-md-7 col-8">
                        <input type="text" readonly [(ngModel)]="iname" class="gInnerInput-border disabled"
                            id="itemsearch2" aria-label="Number">
                    </div>
                </div>

                <div class="d-flex justify-content-center">
                    <div class="p-2  col-xl-3 col-lg-3 col-md-5 col-4">
                        <label class="gInputLable text-center">OutPut Qty</label>
                    </div>
                    <div class="p-2  col-xl-4 col-lg-4 col-md-7 col-8">
                        <div class="row">
                            <div class=" col-5">
                                <input type="text" [(ngModel)]="qty" class="gInnerInput-border "
                                    [ngClass]="{'onlyview':Permission !== 'Y'}" autocomplete="off" id="ratefor"
                                    name="ratefor">
                            </div>
                            <div class=" col-2">
                                <label class="gInputLable text-center">Uom</label>
                            </div>
                            <div class=" col-5">
                                <input type="text" [(ngModel)]="itemUom" readonly class="gInnerInput-border disabled"
                                    id="uom" name="uom">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="d-flex justify-content-center">
                    <div class="p-2  col-xl-3 col-lg-3 col-md-5 col-4">
                        <label class="gInputLable text-center" hidden>Category</label>
                    </div>
                    <div class="p-2  col-xl-4 col-lg-4 col-md-7 col-8">
                        <div class="row">
                            <div class=" col-5" hidden>
                                <select class="gInnerInput-border" [(ngModel)]="icat" id="category" name="category">
                                    <option value="select">Select</option>
                                    <option *ngFor="let cat of catList" [value]="cat.maincat">{{cat.maincat}}
                                    </option>
                                </select>
                            </div>
                            <div class=" col-2">
                                <button id="itemAdd" class="gSaveButton" (click)="addConditionCheck()">Add</button>
                            </div>
                            <div class=" col-2">
                                <button id="itemsrch" class="gSaveButton" (click)="clearForm()">Clear</button>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div class="gTableSection">
                <div id="table-scroll" class="gInnerTable"
                    [ngClass]="{ 'table-scroll': listlen >=16 ,'tablehideScroll': 16 > listlen } ">
                    <table id="main-table" class="gNormalTable-sm table">
                        <thead>
                            <tr>
                                <th class="text-center">Sno</th>
                                <th>Item Code</th>
                                <th>Item Name</th>
                                <th>Qty</th>
                                <th>Uom</th>
                                <th style="text-align: right;">Rate</th>
                                <th style="text-align: center;">Set[Y/N]</th>
                                <th style="text-align: center;">Primary[Y/N]</th>
                                <th style="text-align: center;">Bundle[Y/N]</th>
                                <th style="text-align: right;">Value</th>
                                <th style="text-align: center;">Delete</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let item of individuals;let i=index">
                                <td class="text-center">{{i+1}}</td>
                                <td>{{item.ricode}}</td>
                                <td>{{item.riname}}</td>
                                <td>
                                    <div *ngIf="!item.QtyEdit" (click)="changeEdit(i,'Qty')">{{item.rqty}}</div>
                                    <input *ngIf="item.QtyEdit" size="2" (focusout)="updateQty(i)"
                                        (keyup)="valueClaculate(i)" type="text" [(ngModel)]="item.rqty"
                                        (keypress)="changeValueNumericList($event, i)" class="gInnerInput-border"
                                        id="{{item.ricode}}" name="{{item.ricode}}">
                                </td>
                                <td>{{item.ruom}}</td>
                                <td style="text-align: right;">{{item.rirate |currency:'INR'}}</td>
                                <td style="text-align: center;" (click)="changeEdit(i,'set')">
                                    <div *ngIf="item.Setedit">{{item.SetInd}}</div>
                                    <input *ngIf="!item.Setedit" (keypress)="changeYNEvent($event)" size="2"
                                        maxlength="1" (keydown)="onKeydownupdate($event,'set',i)" type="text"
                                        [(ngModel)]="setYN" (focusout)="updateEdit('set')" class="gInnerInput-border"
                                        id="edit" name="edit">
                                </td>
                                <td style="text-align: center;" (click)="changeEdit(i,'primary')">
                                    <div *ngIf="item.Primarytedit">{{item.VarPm}}</div>
                                    <input *ngIf="!item.Primarytedit" (keypress)="changeYNEvent($event)" size="2"
                                        maxlength="1" (keydown)="onKeydownupdate($event,'primary',i)" type="text"
                                        [(ngModel)]="primaryYN" (focusout)="updateEdit('primary')"
                                        class="gInnerInput-border" id="edit2" name="edit2">
                                </td>
                                <td style="text-align: center;" (click)="changeEdit(i,'bundle')">
                                    <div *ngIf="item.Bundleedit">{{item.vbundle}}</div>
                                    <input *ngIf="!item.Bundleedit" (keypress)="changeYNEvent($event)" size="2"
                                        maxlength="1" (keydown)="onKeydownupdate($event,'bundle',i)" type="text"
                                        [(ngModel)]="bundleYN" (focusout)="updateEdit('bundle')"
                                        class="gInnerInput-border" id="edit3" name="edit3">
                                </td>
                                <td style="text-align: right;">{{item.rivalue |currency:'INR'}}</td>
                                <td style="text-align: center;">
                                    <button mat-icon-button class="gDeleteIcon" (click)="removeItem(i)">
                                        <mat-icon>delete</mat-icon>
                                    </button>
                                    <!-- <i (click)="removeItem(i)" style="color: brown;font-weight: bold;" class="fa fa-trash"
                                    aria-hidden="true"></i> -->
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="row" style="margin-top:5px">
                <div class="col-6 col-md-6 col-lg-3 col-xl-3 ">
                    <span *ngIf="RecipeAllow === 'ALLOW'" style="color: green;">{{RecipeAllow}}</span>
                    <span *ngIf="RecipeAllow !== 'ALLOW'" style="color: brown;">{{RecipeAllow}}</span>
                </div>
            </div>
            <div class="row">
                <div class="col-12 col-md-6 col-lg-6 col-xl-6">
                    <div class="row">
                        <div class="col-4">
                            <label class="gInputLable text-center">Last Modified</label>
                        </div>
                        <div class="col-8 gInputLable text-center" *ngIf="usr!=='' && updDate!==''">{{usr}} /
                            {{updDate}}</div>
                    </div>
                </div>
                <div class="col-12 col-md-6 col-lg-6 col-xl-6 ">
                    <div class="row justify-content-end">
                        <div class="col-4 "><label class="gInputLable text-center">Total Cost</label></div>
                        <div class="col-3 "><input type="text" [(ngModel)]="actCost" readonly class="gInnerInput-border"
                                name="actcost" id="actcost"></div>
                    </div>
                    <div class="row justify-content-end" hidden>
                        <div class="col-3"><label class="gInputLable text-center">Additional cost</label></div>
                        <div class="col-2">
                            <input type="text" [(ngModel)]="addCost" class="gInnerInput-border" name="addCost"
                                autocomplete="off" (keydown)="getItemByCode($event,'addcost')"
                                (keypress)="changeValue($event,'addcost')" id="addCost">
                        </div>
                        <div class="col-4 ">
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" [(ngModel)]="PerorAmt" name="exampleRadios"
                                    (change)="changeRdiobtn($event.target)" id="exampleRadios1" value="%" checked>
                                <label class="form-check-label gInputLable text-center" for="exampleRadios1">%</label>
                            </div>

                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" [(ngModel)]="PerorAmt" name="exampleRadios"
                                    (change)="changeRdiobtn($event.target)" id="exampleRadios2" value="Amt">
                                <label class="form-check-label gInputLable text-center" for="exampleRadios2">Amt</label>
                            </div>
                        </div>
                        <div class="col-3 "><input type="text" [(ngModel)]="addAmt" class="gInnerInput-border" readonly
                                name="actamt" id="actamt"></div>
                    </div>
                    <div class="row justify-content-end" hidden>
                        <div class="col-4 "><label class="gInputLable text-center">Total Cost</label></div>
                        <div class="col-3 "><input type="text" [(ngModel)]="totCost" readonly class="gInnerInput-border"
                                name="totcost" id="totcost"></div>
                    </div>
                    <div class="row justify-content-end">
                        <div class="col-4 "><label class="gInputLable text-center">CostPer Uom</label></div>
                        <div class="col-3 "><input type="text" [(ngModel)]="costUom" readonly class="gInnerInput-border"
                                name="uomcost" id="uomcost"></div>
                    </div>
                </div>
            </div>



            <div class="d-flex justify-content-between" style="margin-top: 20px;">
                <div class="p-2">
                    <button mat-button class="gSaveButton" (click)="openBulkUpdate()">Bulk RM Change</button>

                </div>
                <div class="p-2">
                    <div class="row d-flex  justify-content-center">
                        <button class="gSaveButton" (click)="rmsetPermission()">SAVE</button>
                    </div>
                </div>
                <div class="p-2">
                    <button mat-button class="gSaveButton" (click)="openSwap()">Swap While Set Issue</button>
                </div>
            </div>
        </div>

        <!-- Modal -->
        <div class="modal fade" id="searchmodal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
            aria-hidden="true" data-bs-backdrop="static">
            <div class="modal-dialog gModalContent" role="document" data-bs-backdrop="static">
                <div class="modal-content">
                    <div class="gDialogTitle">
                        <span></span>
                        <span class="gInputLable" id="exampleModalLongTitle">Search Item </span>
                        <button type="button" id="clsBtn3" mat-button aria-label="Close" data-bs-dismiss="modal"
                            aria-label="Close" class="gDialogCloseButton">
                            <!-- &times; -->
                            <span class="material-icons">clear</span>
                        </button>
                    </div>
                    <div class="modal-body  gDialogContainer">
                        <div class="row">
                            <div class="col-3 ">
                                <label class="gInputLable text-center">Item Name</label>
                            </div>
                            <div class="col-9 ">
                                <!-- <mat-form-field class="example-full-width"> -->
                                <input type="text" id="isearch" aria-label="Number" class="gInnerInput-border"
                                    [formControl]="searchItem" [matAutocomplete]="auto4">
                                <mat-autocomplete #auto4="matAutocomplete" class="gAutoCompleteContainer">
                                    <mat-option *ngFor="let item of items" [value]="item?.iname"
                                        (onSelectionChange)='getSelectedIcode($event, item)' class="gSelectOption">
                                        {{ item?.iname }}
                                    </mat-option>
                                </mat-autocomplete>
                                <!-- </mat-form-field> -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="modal fade" id="exampleModalnew" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
            aria-hidden="true" data-bs-backdrop="static">
            <div class="modal-dialog gModalContent" role="document" data-bs-backdrop="static">
                <div class="modal-content">
                    <div class="gDialogTitle">
                        <h5 class="modal-title" id="exampleModalLongTitle">Add New Item </h5>
                        <button type="button" id="clsBtn2" mat-button aria-label="Close" data-bs-dismiss="modal"
                            aria-label="Close" class="gDialogCloseButton">
                            <span class="material-icons">clear</span>
                        </button>
                    </div>
                    <div class="modal-body gDialogContainer">
                        <div class="row" *ngIf="ritemSearch">
                            <mat-form-field class="example-full-width">
                                <input type="text" id="name0search" aria-label="Number" matInput
                                    [formControl]="searchRecipe" [matAutocomplete]="auto">
                                <mat-autocomplete #auto="matAutocomplete" class="gAutoCompleteContainer"
                                (optionSelected)='getSelectedRIcode($event.option.viewValue)'>
                                    <mat-option *ngFor="let item of recipItems" [value]="item?.iname" class="gSelectOption">
                                        {{ item?.iname }}
                                    </mat-option>
                                </mat-autocomplete>
                            </mat-form-field>
                        </div>
                        <div class="row">
                            <div class="col-3 ">
                                <label class="gInputLable text-center">Item Code</label>
                            </div>
                            <div class="col-4 ">
                                <input type="text" [(ngModel)]="ritemCode" autocomplete="off"
                                    (keydown)="getItemByCode($event,'ricode')" (keypress)="restrictNumeric($event)"
                                    name='Code0' id="Code0" class="gInnerInput-border" />
                            </div>
                            <div class="col-2 ">
                                <button id="ritemDetail" class="gSaveButton " (click)="getReceipeDetails()">
                                    <i class="fa fa-angle-double-right" aria-hidden="true"></i>
                                </button>
                            </div>
                            <div class="col-2 ">
                                <button id="itemsrch2" class="gSaveButton " (click)="selectSearchTwo()">
                                    <i class="fa fa-search" aria-hidden="true"></i>
                                </button>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-3 ">
                                <label class="gInputLable text-center">Item Name</label>
                            </div>
                            <div class="col-9 ">
                                <input type="text" [(ngModel)]="riname" readonly name='name0' id="name0"
                                    class="gInnerInput-border" />
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer p-0">
                        <!-- <button type="button" class="btn btn-sm btn-secondary" data-bs-dismiss="modal">Close</button> -->
                        <button type="button" (click)="addSwapItems()" class="gSaveButton">Add
                        </button>
                    </div>
                </div>
            </div>
        </div>


        <!--Add New Item Modal -->
        <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
            aria-hidden="true" data-bs-backdrop="static">
            <div class="modal-dialog gModalContent" role="document" data-bs-backdrop="static">
                <div class="modal-content">
                    <div class="gDialogTitle">
                        <span></span>
                        <span class="gInputLable" id="exampleModalLongTitle">Add New Receipe Item </span>
                        <button type="button" id="clsBtn1" mat-button aria-label="Close" data-bs-dismiss="modal"
                            aria-label="Close" class="gDialogCloseButton">
                            <!-- &times; -->
                            <span class="material-icons">clear</span>
                        </button>
                    </div>
                    <div class="modal-body gDialogContainer">


                        <div class="row" *ngIf="ritemSearch">
                            <mat-form-field class="example-full-width">
                                <input type="text" id="name0search" aria-label="Number" matInput
                                    [formControl]="searchRecipe" [matAutocomplete]="auto">
                                <mat-autocomplete #auto="matAutocomplete" class="gAutoCompleteContainer"
                                    (optionSelected)='getSelectedRIcode($event.option.viewValue)'>
                                    <mat-option *ngFor="let item of recipItems" [value]="item?.iname" class="gSelectOption">
                                        {{ item?.iname }}
                                    </mat-option>
                                </mat-autocomplete>
                            </mat-form-field>
                        </div>
                        <div class="row">
                            <div class="col-3 ">
                                <label class="gInputLable text-center">Item Code</label>
                            </div>
                            <div class="col-4 ">
                                <input type="text" [(ngModel)]="ritemCode" autocomplete="off"
                                    (keydown)="getItemByCode($event,'ricode')" (keypress)="restrictNumeric($event)"
                                    name='Code0' id="Code0" class="gInnerInput-border" />
                            </div>
                            <div class="col-2 ">
                                <button id="ritemDetail" class="gSaveButton " (click)="getReceipeDetails()">
                                    <i class="fa fa-angle-double-right" aria-hidden="true"></i>
                                </button>
                            </div>
                            <div class="col-2 ">
                                <button id="itemsrch2" class="gSaveButton " (click)="selectSearchTwo()">
                                    <i class="fa fa-search" aria-hidden="true"></i>
                                </button>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-3 ">
                                <label class="gInputLable text-center">Item Name</label>
                            </div>
                            <div class="col-9 ">
                                <input type="text" [(ngModel)]="riname" readonly name='name0' id="name0"
                                    class="gInnerInput-border" />
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-3 ">
                                <label class="gInputLable text-center">Rate</label>
                            </div>
                            <div class="col-3 ">
                                <input type="text" name='rate0' disabled [(ngModel)]="rrate"
                                    class="gInnerInput-border disabled " />
                            </div>
                            <div class="col-3 ">
                                <label class="gInputLable text-center">Uom</label>
                            </div>
                            <div class="col-3 ">
                                <input type="text" name='Uom0' disabled [(ngModel)]="ritemUom"
                                    class="gInnerInput-border disabled " />
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-3 ">
                                <label class="gInputLable text-center">Qty</label>
                            </div>
                            <div class="col-3 ">
                                <input type="text" (keypress)="changeValue($event,'RitemQty')" autocomplete="off"
                                    (keydown)="getItemByCode($event,'RitemQty')" [(ngModel)]="rqty" name='qty0'
                                    id="qty0" class="gInnerInput-border" />
                            </div>
                            <div class="col-3 ">
                                <label class="gInputLable text-center">Value</label>
                            </div>
                            <div class="col-3 ">
                                <input id="pcwgt0" [(ngModel)]="rvalue" type="text" name='pcwgt0' disabled
                                    class="gInnerInput-border disabled " />
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-3 ">
                                <label class="gInputLable text-center">Set[Yes/No]</label>
                            </div>
                            <div class="col-3 ">
                                <select [(ngModel)]="rset" class="gInnerInput-border" id="setind"
                                    (change)="selectFocus('bundle')" name="setid">
                                    <option value="Y">Yes</option>
                                    <option value="N">No</option>
                                </select>
                            </div>
                            <div class="col-3 ">
                                <label class="gInputLable text-center">Bundle[Yes/No]</label>
                            </div>
                            <div class="col-3 ">
                                <select [(ngModel)]="rbundle" class="gInnerInput-border" id="bundle"
                                    (change)="selectFocus('btnrecItm')" name="bundle">
                                    <option value="Y">Yes</option>
                                    <option value="N">No</option>
                                </select>
                            </div>
                        </div>

                    </div>
                    <div class="modal-footer p-0">
                        <!-- <button type="button" class="btn btn-sm btn-secondary" data-bs-dismiss="modal">Close</button> -->
                        <button type="button" id="btnrecItm" name="btnrecItm" (click)="receipyAdditem()"
                            class="gSaveButton">Add
                        </button>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <div *ngIf="progressval == 'indeterminate'" class="loading">
        <mat-progress-spinner [mode]="progressval"> </mat-progress-spinner>
    </div>

</div>