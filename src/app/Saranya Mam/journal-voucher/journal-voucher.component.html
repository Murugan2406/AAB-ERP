<div class=" d-flex align-items-center justify-content-center " *ngIf="fetchLoading"
    style="position: fixed; top:0; bottom: 0; left: 0; right: 0; z-index: 10001 !important; backdrop-filter: blur(2px);">
    <mat-spinner></mat-spinner>
</div>
<section class="gWrapper">

    <app-header *ngIf="GMenu !== 'JVApprovel' && showNormalJv" Titleheader="Journal Voucher"  back="true" (BackClick)="BackClickedFromNormal()"></app-header>
    <app-header *ngIf="GMenu !== 'JVApprovel' && showViewJv" Titleheader="View Journal Voucher"  back="true" (BackClick)="BackClickedFromNormal()"></app-header>
    <app-header *ngIf="GMenu === 'JVApprovel'" back="true" (BackClick)="BackClicked()"
        Titleheader="{{SectionTitle}}"></app-header>


    <!-- ============================ Normal JV Creation Section ================================ -->
    <div [hidden]="!showNormalJv"  #JVNormalCreation>
        <div class="gcardContainer mt-2 mx-2">
            <div class="row">
                <div class="col-12 col-sm-6 col-xl-7 d-flex">
                    <button mat-button class="gIconButton" (click)="toggleVoucherData()" *ngIf="!voucherInformation">
                        <mat-icon>add</mat-icon>
                    </button>
                    <button mat-button class="gIconButton" (click)="toggleVoucherData()" *ngIf="voucherInformation">
                        <mat-icon style="line-height: 9px !important">minimize</mat-icon>
                    </button> <span class="gInputLable"> &nbsp; <b>Voucher Information </b> &nbsp;
                        <b> {{VoucherName}} &nbsp;&nbsp;&nbsp;&nbsp; {{WStatus}} &nbsp;&nbsp;&nbsp;&nbsp;
                            {{ReceiptStatus}}</b></span>
                </div>
                <div class="col-12 col-sm-6  col-xl-5 d-flex text-end justify-content-end gap-3">

                    <button type="button" mat-button class="gSaveButton"
                        *ngIf="GMenu !== 'JVApprovel' && OnlyView && Authorized === 'AUTHORIZED' && ReverseGivenFlag === 'No' && !ReverseJv"
                        (click)="ReverselJv1(JVRejectReverse)">
                        <mat-icon style="font-size: 20px;">restore</mat-icon> Reversal JV
                    </button>
                    <button type="button" mat-button class="gSaveButton" *ngIf="OnlyView && Authorized === 'AUTHORIZED' && !ReverseJv"
                        (click)="JVACCPosting()">
                        <mat-icon style="font-size: 20px;">remove_red_eye</mat-icon> Account Posting
                    </button>
                    <button type="button" mat-button class="gSaveButton"
                        *ngIf="GMenu !== 'JVApprovel' && OnlyView && Authorized === 'AUTHORIZED'&& !ReverseJv"
                        (click)="PrintJV(printJournalVoucher)">
                        <mat-icon style="font-size: 20px;"><mat-icon>print</mat-icon></mat-icon> Print
                    </button>

                    <button type="button" id="ResetButton" mat-button class="gSaveButton" (click)="ResetJV()"
                        *ngIf="GMenu !== 'JVApprovel'">
                        <mat-icon>refresh</mat-icon>
                        Clear
                    </button>
                    <button type="button" mat-button class="gSaveButton"
                        *ngIf="!showApproveJv && GMenu === 'JVApprovel' &&  curStatusFresh && showAppRejectButton" (click)="ApproveJV()">
                        <mat-icon style="font-size: 20px;">check</mat-icon> Approve
                    </button>
                    <button type="button" mat-button class="gDeleteButton"
                        *ngIf="!showApproveJv && GMenu === 'JVApprovel' && curStatusFresh && showAppRejectButton "
                        (click)="RejectJV1(JVRejectReverse)">
                        <mat-icon style="font-size: 20px;">cancel</mat-icon> Reject
                    </button>


                    <button type="button" mat-button class="gDeleteButton"
                        *ngIf="IsFresh && !OnlyView && GMenu !== 'JVApprovel'&& ActionMode === 'Edit'" (click)="DeleteJv()">
                        <mat-icon style="font-size: 20px;">delete</mat-icon> Delete
                    </button>


                    <button type="button" id="SaveButton" mat-button class="gSaveButton"
                        *ngIf="!OnlyView && GMenu !== 'JVApprovel' && ActionMode === 'Edit' " (click)="SaveJv('update')">
                        <mat-icon>save</mat-icon> Update
                    </button>

                    <button type="button" id="SaveButton" mat-button class="gSaveButton"
                        *ngIf="!OnlyView && GMenu !== 'JVApprovel' && ActionMode !== 'Edit' " (click)="SaveJv('save')">
                        <mat-icon>save</mat-icon> Save
                    </button>

                    <button type="button" mat-button class="gSaveButton " id="ViewButton" *ngIf="GMenu !== 'JVApprovel'"
                        (click)="ViewJv(JvView)">
                        <mat-icon>remove_red_eye</mat-icon>
                        View
                    </button>
                </div>


            </div>
            <div *ngIf="voucherInformation" [@enterAnimation]>
                <form [formGroup]="voucherInformationForm" class="row mt-2">

                    <div class="col-12 col-sm-6 col-md-4 ">
                        <div class="row form-group">
                            <mat-label class="gInputLable col-sm-12 col-md-4 col-lg-4">Journal Type <strong
                                    class="text-danger ng-star-inserted">*</strong> </mat-label>
                            <div class="col-sm-12 col-md-8 col-lg-8">
                                <mat-select class="gInnerInput" id="JvType" formControlName="JvType" >
                                    <mat-option class="gSelectOption" (onSelectionChange)="FocusNext($event, 'accDate')" *ngFor="let JVType of JvTypes" [value]="JVType">
                                        {{ JVType }}
                                    </mat-option>
                                </mat-select>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-sm-6 col-md-4">
                        <div class="row form-group">
                            <label class="gInputLable col-sm-12 col-md-4 col-lg-4">Accounting Date <strong
                                    class="text-danger ng-star-inserted">*</strong> </label>
                            <div class="col-sm-12 col-md-8 col-lg-5 ">
                                <div class="gOuterInput">
                                    <input class="gInnerInput" matInput id="accDate" formControlName="accDate"
                                        (keydown)="keytab($event, 'narration')" [matDatepicker]="picker" />
                                    <mat-datepicker-toggle matSuffix [for]="picker" class="gInputButton">
                                        <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                                    </mat-datepicker-toggle>
                                    <mat-datepicker #picker></mat-datepicker>
                                </div>
                            </div>

                        </div>

                    </div>
                    <div class="col-12 col-sm-6 col-md-4">
                        <div class="row form-group">
                            <mat-label class="gInputLable col-sm-12 col-md-4 col-lg-4">Narration <strong
                                    class="text-danger ng-star-inserted">*</strong> </mat-label>
                            <div class="col-sm-12 col-md-8 col-lg-8">
                                <input type="text" class="gInnerInput" name="narration" id="narration"
                                    formControlName="narration" autocomplete="off"
                                    (keydown)="keytab($event, 'AccountType')" />
                            </div>
                        </div>
                    </div>


                </form>
            </div>
        </div>
        <div class="gcardContainer mt-2 mx-2" *ngIf="!this.OnlyView">
            <div class="row  align-items-baseline" >
                <div class="col-12 col-sm-5 col-xl-4 d-flex  ">
                    <button mat-button class="gIconButton" (click)="toggleForm()" *ngIf="!ShowForm">
                        <mat-icon>add</mat-icon>
                    </button>
                    <button mat-button class="gIconButton" (click)="toggleForm()" *ngIf="ShowForm">
                        <mat-icon style="line-height: 9px !important">minimize</mat-icon>
                    </button>
                    <span class="gInputLable"> &nbsp; <b>Accounting Information</b>  </span>
                    &nbsp; &nbsp;


                </div>
                <div class="col-12 col-sm-6 col-xl-4 d-flex" *ngIf="ShowForm">
                    <div class="row w-100">

                        <label class="gInputLable col-6 col-sm-6 col-md-4 col-lg-4  " style="min-width: fit-content;">
                            Transaction Type
                            <strong class="text-danger ng-star-inserted">*</strong>
                        </label>

                        <div class=" col-6 col-sm-6 col-md-8 col-lg-5" style="padding-left: 20px;">
                            <mat-select class="gInnerInput mainFocus" id="AccountType" [formControl]="AccountType">
                                <mat-option class="gSelectOption" *ngFor="let AccountType of AccountTypeS"
                                    [value]="AccountType" (onSelectionChange)="FocusNext($event, 'attachmentbtn')">
                                    {{ AccountType }}
                                </mat-option>
                            </mat-select>
                        </div>
                    </div>

                </div>

                <div class="col-12 col-sm-6 col-xl-4 d-flex" *ngIf="ShowForm">
                    <div class="row w-100">

                        <label class="gInputLable col-6 col-sm-6 col-md-4 col-lg-4  " style="min-width: fit-content;">
                           Attachments
                         
                        </label>

                        <div class=" col-6 col-sm-6 col-md-8 col-lg-8" style="padding-left: 20px;">

                            <div class="gOuterInput">
                                <input type="text" class="gInnerInput" id="attachFileId" [formControl]="attachments"
                                  [(ngModel)]="filename" autocomplete="off" style="cursor: pointer;" />
                                <input type="file" style="display: none" id="attachFileId1" accept=".png, .jpg, .jpeg, .pdf"
                                  (change)="selectFile($event)"  />
                                <button  *ngIf="!this.OnlyView" mat-button type="button" type="button"
                                  onclick="document.getElementById('attachFileId1').click()" id="attachmentbtn"
                                  class="gInputButton" >
                                  <mat-icon>attach_file</mat-icon>
                                </button>
                                <button *ngIf="this.OnlyView" class="gInputButton" type="button" mat-button (click)="downloadFile(this.base64File, filename)">
                                  <mat-icon>download</mat-icon>
                                </button>
                              </div>
                        </div>
                    </div>

                </div>
            </div>

            <div *ngIf="ShowForm" class="mt-2 pt-3 hrline">

                <app-accounting-information *ngIf="!this.OnlyView" mode='edit' unique="debit"
                    title="" (submit)="accFormSubmit($event)"></app-accounting-information>


            </div>
        </div>
        <div class="row mx-2">
            <!-- ============================ Debit Table ================================ -->
            <div class="mt-2  col-12 col-xl-12 p-0">
                <section class="gTableSection">
                    <div class="gTableActionheaders d-flex justify-content-sm-between">
                      
                            <span class="gInputLable"> <b>Debit</b>  </span>
                            <span class="gInputLable" *ngIf="debitFileName !=='' && DebitTableArr.length > 0">FileName: {{debitFileName}}</span>
             
                        <div class=" d-flex justify-content-end">
                            <form role="search" class="search-form ml-3">
                                <input type="search" name="Search" class="gSearchText"
                                    [ngClass]="{'gSearchText': viewSearch1 === '', 'gSearchText1':viewSearch1!=='' }"
                                    #input autocomplete="off" [(ngModel)]="viewSearch1" />
                            </form>
                            <div class="row m-0 p-0">
                                <div class="col-12  d-flex gap-2 align-end">

                                    <button type="button" mat-button class="gNormalButton" *ngIf="!this.OnlyView"
                                        (click)="DebitBulk(debitBulkTemp, 'debit')">
                                        <mat-icon>cloud_download</mat-icon> Bulk Import
                                    </button>


                                    <!-- <button type="button" mat-button class="gNormalButton" *ngIf="!this.OnlyView"
                                        (click)="clearTable('Debit')">
                                        <mat-icon>refresh</mat-icon>
                                        Clear
                                    </button> -->

                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="gInnerTable">
                        <table class="gNormalTable-sm table" id="table" width="100%">
                            <thead>
                                <tr>
                                    <th>S.No</th>
                                    <th>Fin Book</th>
                                    <th>Cost Center</th>
                                    <th>Account Type</th>
                                    <th>AccCode / Ussage Id</th>
                                    <th>Acc/Ussage Name</th>
                                    <th>Attachments</th>
                                    <th>Remarks</th>
                                    <th *ngIf="!OnlyView">Delete</th>
                                    <th>Amount</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor=" let row of DebitTableArr | filter: viewSearch1;let i = index">
                                    <td>{{ i + 1 }}</td>
                                    <td>{{ row.FinBookName ?? row.FbName }}</td>
                                    <td>{{row.costCenter ?? row.CostCenterName ?? row.BrName}}</td>
                                    <td>{{row.AcSelectionType}}</td>
                                    <td>{{ row.AccCode_UssageCode ?? row.AcUsCode }}</td>
                                    <td>{{ row.AccName_UssageName ?? row.AcUsName}}</td>
                                    <td>

                                        <button *ngIf="row.fileName !=='Nill' && row.fileName !=='' && WStatus !==''" mat-icon-button (click)="downloadFile(row.base64file, row.fileName)" class="gHandIcon">
                                            <mat-icon>download</mat-icon>
                                          </button>
                    

                                          <button *ngIf="row.fileName !=='Nill' && row.fileName !=='' && WStatus !==''" mat-icon-button (click)="attachmentpreview(row, imgPreview)" class="gHandIcon">
                                            <mat-icon>launch</mat-icon>1
                                          </button>
                    
                                        <button *ngIf="row.fileName !=='Nill' && row.fileName !==''&& WStatus ===''" mat-icon-button (click)="attachmentpreview(row, imgPreview)" class="gHandIcon">
                                            <mat-icon>launch</mat-icon>2
                                          </button>

                                          <button *ngIf="row.fileName ==='Nill' || row.fileName ===''" mat-icon-button class="gDeleteIcon">
                                            <mat-icon>block</mat-icon>
                                          </button>
                                          {{ row.fileName}}
                                    </td>
                                    <td>{{ row.remarks ?? row.Remarks }}</td>
                                    <td *ngIf="!OnlyView">
                                        <button mat-icon-button class="gDeleteIcon"
                                            (click)="deleteAccountingData(i, 'Debit')">
                                            <mat-icon>delete</mat-icon>
                                        </button>
                                    </td>
                                    <td>{{ row.Amount ?? row.TrnAmt | currency:"INR"}}</td>
                                </tr>
                                <tr class="toggleFooter" *ngIf="DebitTableArr.length > 0">
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td *ngIf="!OnlyView"></td>
                                    <td>Total Amount</td>
                                    <td>
                                        {{getDebitTotalAmount() | currency:"INR":"symbol" }}
                                    </td>
                                </tr>
                                <tr *ngIf="DebitTableArr.length === 0">
                                    <td colspan="10" class="text-center" *ngIf="!OnlyView"> No records Found</td>
                                    <td colspan="9" class="text-center" *ngIf="OnlyView"> No records Found</td>
                                </tr>
                                <tr *ngIf="loading">
                                    <td [colSpan]="10" *ngIf="!OnlyView">
                                        <div class="SkeltonLoader text-center justify-content-center d-flex">
                                            <mat-spinner></mat-spinner>
                                        </div>
                                    </td>
                                    <td [colSpan]="9" *ngIf="OnlyView">
                                        <div class="SkeltonLoader text-center justify-content-center d-flex">
                                            <mat-spinner></mat-spinner>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>
            </div>

            <!-- ============================ Credit Table =====================app=========== -->
            <div class="mt-2 col-12 col-xl-12 p-0">
                <section class="gTableSection">
                    <div class="gTableActionheaders d-flex justify-content-sm-between">
            
                            <span class="gInputLable"> <b>Credit</b>  </span>
                            <span class="gInputLable" *ngIf="creditFileName !=='' && CreditTableArr.length > 0">FileName : {{creditFileName}}</span>

                 
                        <div class=" d-flex justify-content-end">
                            <form role="search" class="search-form ml-3">
                                <input type="search" name="Search" class="gSearchText" #input
                                    [ngClass]="{'gSearchText': viewSearch === '', 'gSearchText1':viewSearch!=='' }"
                                    autocomplete="off" [(ngModel)]="viewSearch" />
                            </form>
                            <div class="row m-0 p-0">
                                <div class="col-12  d-flex gap-2 align-end">

                                    <button type="button" mat-button class="gNormalButton" *ngIf="!this.OnlyView"
                                        (click)="DebitBulk(debitBulkTemp, 'credit')">
                                        <mat-icon>cloud_download</mat-icon> Bulk Import
                                    </button>

                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="gInnerTable">
                        <table class="gNormalTable-sm table" id="table" width="100%">
                            <thead>
                                <tr>
                                    <th>S.No</th>
                                    <th>Fin Book</th>
                                    <th>Cost Center</th>
                                    <th>Account Type</th>
                                    <th>AccCode / Ussage Id</th>
                                    <th>Acc/Ussage Name</th>
                                    <th>Attachments</th>
                                    <th>Remarks</th>
                                    <th *ngIf="!OnlyView"> Delete</th>
                                    <th>Amount</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="  let row of CreditTableArr | filter: viewSearch;let i = index">
                                    <td>{{ i + 1 }}</td>
                                    <td>{{ row.FinBookName ?? row.FbName }}</td>
                                    <td>{{ row.costCenter ?? row.CostCenterName ?? row.BrName}}</td>
                                    <td>{{ row.AcSelectionType }}</td>
                                    <td>{{ row.AccCode_UssageCode ?? row.AcUsCode }}</td>
                                    <td>{{ row.AccName_UssageName ?? row.AcUsName }}</td>
                                    <td>
                                        <button *ngIf="row.fileName !=='Nill' && row.fileName !=='' && WStatus !==''" mat-icon-button (click)="downloadFile(row.base64file, row.fileName)" class="gHandIcon">
                                            <mat-icon>download</mat-icon>
                                          </button>
                                 
                                          <button *ngIf="row.fileName !=='Nill' && row.fileName !=='' && WStatus !==''" mat-icon-button (click)="attachmentpreview(row, imgPreview)" class="gHandIcon">
                                            <mat-icon>launch</mat-icon>1
                                          </button>
                                     
                                        <button *ngIf="row.fileName !=='Nill' && row.fileName !==''&& WStatus ===''" mat-icon-button (click)="attachmentpreview(row, imgPreview)" class="gHandIcon">
                                            <mat-icon>launch</mat-icon>2
                                          </button>
                                          <button *ngIf="row.fileName ==='Nill' || row.fileName ===''" mat-icon-button class="gDeleteIcon">
                                            <mat-icon>block</mat-icon>
                                          </button>
                                        {{ row.fileName}}
                                        
                                    </td>
                                    <td>{{ row.remarks ?? row.Remarks }}</td>
                                    <td *ngIf="!OnlyView">
                                        <button mat-icon-button class="gDeleteIcon"
                                            (click)="deleteAccountingData(i, 'Credit')">
                                            <mat-icon>delete</mat-icon>
                                        </button>
                                    </td>
                                    <td>{{ row.Amount ?? row.TrnAmt | currency:"INR" }}</td>
                                </tr>
                                <tr class="toggleFooter" *ngIf="CreditTableArr.length > 0">
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td *ngIf="!OnlyView"></td>
                                    <td>Total Amount</td>
                                    <td>
                                        {{getCreditTotalAmount() | currency:"INR":"symbol" }}
                                    </td>
                                </tr>
                                <tr *ngIf="CreditTableArr.length === 0">
                                    <td colspan="10" class="text-center" *ngIf="!OnlyView"> No records Found</td>
                                    <td colspan="9" class="text-center" *ngIf="OnlyView"> No records Found</td>

                                </tr>
                                <tr *ngIf="loading">
                                    <td [colSpan]="10" *ngIf="!OnlyView">
                                        <div class="SkeltonLoader text-center justify-content-center d-flex">
                                            <mat-spinner></mat-spinner>
                                        </div>
                                    </td>
                                    <td [colSpan]="9" *ngIf="OnlyView">
                                        <div class="SkeltonLoader text-center justify-content-center d-flex">
                                            <mat-spinner></mat-spinner>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>
            </div>
        </div>
        <div class="row mx-2" *ngIf="GMenu === 'JVNormal'"><span class="gInputLable"> Exit:&nbsp; Alt + X &nbsp;&nbsp;&nbsp;&nbsp; Clear:&nbsp; Alt + C&nbsp;&nbsp;&nbsp;&nbsp; Save: &nbsp;Alt + S&nbsp;&nbsp;&nbsp;&nbsp; View:&nbsp;Alt + V</span></div>
    </div>
    <!-- ============================ End of Normal JV Creation Section ================================ -->


    <ng-template #imgPreview let-data  >

        <div  cdkDrag cdkDragRootElement=".cdk-overlay-pane" >
        <div class="gDialogTitle">
            <span></span>
            <span class="">{{data.fileName ?? data.DocName}}</span>
    
            <button type="button" id="submit" mat-button class="gDialogCloseButton" (click)="dialog.closeAll()">
                <mat-icon style="line-height: 1 !important;">close</mat-icon>
            </button>
        </div>
        <div class="gDialogContainer mt-2 p-2">
        <img src="{{data.base64file ?? data.AttachmentFile}}" alt="" style="width: 100%;max-height: 80vh;object-fit: contain;"> 

        </div>
        </div>

    </ng-template>


    <!-- ============================ Normal JV View Section ================================ -->
    <div [hidden]="!showViewJv"   #JVNormalView>

        <div class="gDialogContainer mt-2">
    
            <form [formGroup]="viewJVForm">
                <div class="row mx-1">
                    <div class="col-12 col-sm-6 col-md-4 col-lg-5">
                        <div class="d-flex flex-column gap-0">
                            <div class="row form-group">
                                <mat-label class="gInputLable col-sm-12 col-md-12 col-xl-4">Finbook Name <strong
                                        class="text-danger ng-star-inserted">*</strong> </mat-label>
                                <div class="col-sm-12 col-md-12 col-lg-8">
                                    <input type="text" class="gInnerInput-border" name="finBookName" id="finBookName"
                                        formControlName="finBookName" autocomplete="off"
                                        (input)="FilterFinbook($event.target.value, 'three')"
                                        (keydown)="keytab($event, 'viewCostCenter')" [matAutocomplete]="fbName" />
                                    <mat-autocomplete #fbName="matAutocomplete" class="gAutoCompleteContainer"
                                        [displayWith]="displayFb3">
                                        <mat-option class="gSelectOption" *ngFor="let fb of FbThreeArr" [value]="fb"
                                            (onSelectionChange)="viewFbchange($event,'view')">{{ fb.FbName }}
                                        </mat-option>
                                    </mat-autocomplete>
                                </div>
                            </div>
                            <div class="row form-group">
                                <mat-label class="gInputLable col-sm-12 col-md-12 col-xl-4">Cost Center <strong
                                        class="text-danger ng-star-inserted">*</strong> </mat-label>
                                <div class="col-12 col-sm-12 col-md-12 col-lg-8">
                                    <input type="text" class="gInnerInput-border" name="costCenter" id="viewCostCenter"
                                        formControlName="costCenter" autocomplete="off"
                                        (input)="getViewBranchName($event.target.value)" [matAutocomplete]="autoBranchName"
                                        (keydown)="keytab($event, 'fromDate')" />
                                    <mat-autocomplete #autoBranchName="matAutocomplete" class="gAutoCompleteContainer"
                                        [displayWith]="displayBr">
                                        <mat-option class="gSelectOption" *ngFor="let branchName of AllBranchList"
                                            [value]="branchName" (onSelectionChange)="viewBrchange($event,branchName)">{{
                                            branchName.brname }}</mat-option>
                                    </mat-autocomplete>
                                </div>
                            </div>
    
                        </div>
                    </div>
                    <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                        <div class="d-flex flex-column gap-0">
                            <div class="row form-group">
                                <label class="gInputLable col-sm-12 col-md-12 col-xl-5">From Date <strong
                                        class="text-danger ng-star-inserted">*</strong> </label>
                                <div class="col-sm-12 col-md-12 col-xl-7">
                                    <div class="gOuterInput outer-border">
                                        <input class="gInnerInput" matInput id="fromDate" name="fromDate"
                                            formControlName="fromDate" (keydown)="onfromDateSelect($event)"
                                            [matDatepicker]="picker1" (change)="SubmitViewJv(this.viewJVForm) " />
                                        <mat-datepicker-toggle matSuffix [for]="picker1" class="gInputButton">
                                            <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                                        </mat-datepicker-toggle>
                                        <mat-datepicker #picker1></mat-datepicker>
                                    </div>
    
    
                                </div>
                            </div>
                            <div class="row form-group mb-2">
                                <label class="gInputLable col-sm-12 col-md-12 col-xl-5">To Date <strong
                                        class="text-danger ng-star-inserted">*</strong> </label>
                                <div class="col-sm-12 col-md-12 col-xl-7">
                                    <div class="gOuterInput outer-border">
                                        <input class="gInnerInput" matInput id="toDate" name="toDate"
                                            formControlName="toDate" (keydown)="onToDateSelect($event)"
                                            [matDatepicker]="picker2" (change)="SubmitViewJv(this.viewJVForm)" />
                                        <mat-datepicker-toggle matSuffix [for]="picker2" class="gInputButton">
                                            <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                                        </mat-datepicker-toggle>
                                        <mat-datepicker #picker2></mat-datepicker>
    
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
    
                    <div class="col-12 col-sm-6 col-md-4 col-lg-4">
                        <div class="d-flex flex-column gap-0">
                            <div class="row form-group">
                                <mat-label class="gInputLable col-sm-12 col-md-12 col-xl-4">Status <strong
                                        class="text-danger ng-star-inserted">*</strong> </mat-label>
                                <div class="col-12 col-sm-12 col-md-12 col-lg-8">
                                    <mat-select class="gInnerInput-border" id="status" formControlName="status"
                                        (selectionChange)="selectApprovalStatus($event, 'view')">
                                        <mat-option class="gSelectOption" *ngFor="let status of receiptStatus"
                                            [value]="status">
                                            {{ status }}
                                        </mat-option>
                                    </mat-select>
                                </div>
                            </div>
                            <div class="row form-group  mt-1">
                                <mat-label class="gInputLable col-sm-12 col-md-12 col-xl-4 text-start">Tran Type <strong
                                        class="text-danger ng-star-inserted">*</strong> </mat-label>
                                <div class="col-12 col-sm-12 col-md-12 col-lg-8 text-start">
                                    <div class="gOuterInput outer-border">
                                        <mat-select class="gInnerInput" id="entrType" formControlName="tranType"
                                            (selectionChange)="selectTranType($event, 'view')">
                                            <mat-option class="gSelectOption" *ngFor="let eType of entryTypes"
                                                [value]="eType">
                                                {{ eType.VoucherType }}
                                            </mat-option>
                                        </mat-select>
                                        <button type="button" mat-button class="gInputButton"  id="ViewDialogbutton"
                                            (click)="SubmitViewJv(viewJVForm)">
                                            <mat-icon>autorenew</mat-icon>
    
                                        </button>
                                    </div>
                                </div>
    
                            </div>
                        </div>
                    </div>
                </div>
            </form>
    
            <section class="gTableSection mx-2">
                <div class="gTableActionheaders">
                    <form role="search" class="search-form ml-3">
                        <input type="search" name="Search" class="gSearchText" #input autocomplete="off"
                            [(ngModel)]="viewSearch" />
                    </form>
                </div>
                <div class="gInnerTable" style="max-height: calc(100vh - 150px);">
                    <table class="gNormalTable-sm table" id="viewTable" width="100%">
                        <thead>
                            <tr>
                                <th scope="col">S.No</th>
                                <th scope="col">Acc Date</th>
                                <th scope="col" *ngIf="viewJVForm.get('costCenter').value.brname === 'ALL'">Cost Center</th>
                                <th scope="col" >
                                    View</th>
                                <th scope="col">VoucherNo</th>
    
                                <!-- <th scope="col">Edit</th> -->
                                <th scope="col">Trans Date</th>
                                <th scope="col">WStatus</th>
                                <th scope="col" >
                                    Re Use</th>
                                <th scope="col">DC Status</th>
                                <th scope="col">CreatedUsr</th>
                                <th scope="col">CreatedTime</th>
                                <th scope="col">More</th>
                                <th scope="col">Is Reversed</th>
                                <th scope="col" style="text-align: right;">Receipt Amt</th>
    
                        </tr>
                        </thead>
                        <tbody>
                            <tr *ngIf="DataSource.length === 0">
                                <td colspan="12" class="text-center">No record found.</td>
                            </tr>
                            <tr *ngFor="
                    let data of DataSource | filter: viewSearch;
                    let i = index " tabindex="0">
                                <td>{{ i + 1 }}</td>
                                <td>{{ data.AccDate }}</td>
                                <td *ngIf="viewJVForm.get('costCenter').value.brname === 'ALL'">{{ data.brname }}</td>
                                <td >
                                    <button mat-icon-button (click)="JVDetails(data, 'JVView', i)" class="gHandIcon">
                                        <i class="fa fa-hand-o-right" aria-hidden="true"></i>
                                    </button>
                                </td>
                                <td>{{ data.VoucherNo }}</td>
         
                                <td>{{ data.ttime }}</td>
                                <td>{{ data.WStatus }}</td>
                                <td >
                                    <button mat-icon-button (click)="JVDetails(data, 'JvReEntry', i)" class="gHandIcon">
                                        <i class="fa fa-hand-o-left" aria-hidden="true"></i>
                                    </button>
                                </td>
                                <td>{{ data.ReceiptStatus }}</td>
                                <td>{{ data.CreatedUsr }}</td>
                                <td>{{ data.CreatedTime|date:'dd-MMM-YYYY  hh:mm:ss a' }}</td>
                                <td><button mat-icon-button (click)="JVHistory(data, i)" class="gHandIcon">
                                        <mat-icon>launch</mat-icon>
                                    </button>
                                </td>
                                <td>{{ data.IsReversed }}</td>
                                <td style="text-align: right;">{{ data.ReceiptAmt | currency:"INR":"symbol" }}</td>
    
                            </tr>
                            <tr *ngIf="Viewloading">
                                <td [colSpan]="14" *ngIf="viewJVForm.get('costCenter').value.brname === 'ALL'">
                                    <div class="SkeltonLoader text-center justify-content-center d-flex">
                                        <mat-spinner></mat-spinner>
                                    </div>
                                </td>
                                <td [colSpan]="13" *ngIf="viewJVForm.get('costCenter').value.brname !== 'ALL'">
                                    <div class="SkeltonLoader text-center justify-content-center d-flex">
                                        <mat-spinner></mat-spinner>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
    
        </div>
    </div>
    <!-- ============================ End of Normal JV View Section ================================ -->


    <!-- ============================ Approval Jv View Section ================================ -->

    <div *ngIf="showApproveJv" class="mx-2">

        <div class="gDialogContainer m-1">
            <form [formGroup]="JVApprovalForm">
                <div class="row">
                    <div class="col-12 col-sm-6 col-md-4 col-lg-4">
                        <div class="d-flex flex-column gap-0">
                            <div class="row form-group">
                                <label class="gInputLable col-sm-12 col-md-12 col-lg-4">Company Name <strong
                                        class="text-danger ng-star-inserted">*</strong> </label>
                                <div class="col-sm-12 col-md-12 col-lg-8">
                                    <input type="text" class="gInnerInput-border" style="font-size: 12px !important; "
                                        matInput formControlName="companyName" readonly />

                                </div>
                            </div>
                            <div class="row form-group">
                                <mat-label class="gInputLable col-sm-12 col-md-12 col-lg-4">Fin Book<strong
                                        class="text-danger ng-star-inserted">*</strong> </mat-label>
                                <div class="col-sm-12 col-md-12 col-lg-8">
                                    <input type="text" class="gInnerInput-border" matInput id="finBookName"
                                        formControlName="finBookName"
                                        (input)="FilterFinbook($event.target.value, 'Approve')"
                                        (keydown)="keytab($event, 'approvalFromDate')" [matAutocomplete]="fbName1" />
                                    <mat-autocomplete #fbName1="matAutocomplete" class="gAutoCompleteContainer"
                                        [displayWith]="displayFb3">
                                        <mat-option (onSelectionChange)="viewFbchange($event,'app' )"
                                            class="gSelectOption" *ngFor="let fb of JvAprFilterList" [value]="fb">{{
                                            fb.FbName }}</mat-option>
                                    </mat-autocomplete>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                        <div class="d-flex flex-column gap-0">
                            <div class="row form-group">
                                <label class="gInputLable col-sm-12 col-md-12 col-lg-4">From Date<strong
                                        class="text-danger ng-star-inserted">*</strong> </label>
                                <div class="col-sm-12 col-md-12 col-lg-6 gOuterInput outer-border">

                                    <input class="gInnerInput" matInput id="approvalFromDate" formControlName="fromDate"
                                        (keydown)="keytab($event, 'approvalToDate')"
                                        (change)="ViewApprovalJV(JVApprovalForm)" [matDatepicker]="picker1" />
                                    <mat-datepicker-toggle matSuffix [for]="picker1" class="gInputButton">
                                        <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                                    </mat-datepicker-toggle>
                                    <mat-datepicker #picker1></mat-datepicker>
                                </div>
                            </div>
                            <div class="row form-group">
                                <label class="gInputLable col-sm-12 col-md-12 col-lg-4">To Date<strong
                                        class="text-danger ng-star-inserted">*</strong> </label>
                                <div class="col-sm-12 col-md-12 col-lg-6 gOuterInput outer-border">

                                    <input class="gInnerInput" matInput id="approvalToDate" formControlName="toDate"
                                        (keydown)="keytab($event, 'status')" [matDatepicker]="picker2"
                                        (change)="ViewApprovalJV(JVApprovalForm)" />
                                    <mat-datepicker-toggle matSuffix [for]="picker2" class="gInputButton">
                                        <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                                    </mat-datepicker-toggle>
                                    <mat-datepicker #picker2></mat-datepicker>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                        <div class="d-flex flex-column gap-0">
                            <div class="row form-group">
                                <mat-label class="gInputLable col-sm-12 col-md-12 col-lg-4">Status<strong
                                        class="text-danger ng-star-inserted">*</strong> </mat-label>
                                <div class="col-sm-12 col-md-12 col-lg-8">
                                    <mat-select class="gInnerInput-border statusModel" size="5" id="status"
                                        formControlName="status"
                                        (selectionChange)="selectApprovalStatus($event, 'app')">
                                        <mat-option class="gSelectOption" *ngFor="let status of receiptStatusApp"
                                            [value]="status">
                                            {{ status }}
                                        </mat-option>
                                    </mat-select>
                                </div>
                            </div>
                            <div class="row form-group">
                                <mat-label class="gInputLable col-sm-12 col-md-12 col-lg-4">Entry Type<strong
                                        class="text-danger ng-star-inserted">*</strong> </mat-label>
                                <div class="col-sm-12 col-md-12 col-lg-8">

                                    <mat-select class="gInnerInput-border statusModel" size="5" id="entrType"
                                        formControlName="reverseEntry"
                                        (selectionChange)="selectTranType($event, 'app')">
                                        <mat-option class="gSelectOption" *ngFor="let eType of entryTypes"
                                            [value]="eType">
                                            {{ eType.VoucherType }}
                                        </mat-option>
                                    </mat-select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-sm-6 col-md-3 col-lg-1">
                        <div class="d-flex flex-column gap-0">
                            <div class="row form-group">
                                <div class="col-12 col-sm-12 col-md-12 col-lg-12">
                                    <button type="button" mat-button class="gNormalButton"id="ViewDialogbutton"
                                         id="button"
                                        (click)="ViewApprovalJV(JVApprovalForm)">
                                        <mat-icon>remove_red_eye</mat-icon>
                                        View
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
        <section class="gTableSection mt-1">
            <div class="gTableActionheaders">
                <form role="search" class="search-form">
                    <input type="search" name="Search" class="gSearchText" #input autocomplete="off"
                        [(ngModel)]="viewSearch" />
                </form>
            </div>
            <div class="gInnerTable" style="max-height: calc(100vh - 145px);">
                <table class="gNormalTable-sm table" id="ApprovalTable" width="100%">
                    <thead>
                        <tr>
                            <th scope="col">S.No</th>
                            <!-- <th scope="col">Fin Book</th> -->

                   
                            <th scope="col">Transaction Date</th>
                            <th>View</th>
                            <th scope="col">Transaction Id</th>
                            <!-- <th scope="col">Receipt Status</th> -->
                    
                            <th scope="col">WStatus</th>
                            <th scope="col">DCStatus</th>
                            <th scope="col">Created User</th>
                            <th scope="col">From Location</th>
                    
                            <th scope="col">Approved Date</th>
                            <th scope="col">Approved User</th>
                            <th scope="col">Reject Reason</th>
                            <th scope="col">Receipt Amt</th>
                            <!-- <th scope="col">Supplier Code</th> -->
                            <!-- <th scope="col">Supplier Name</th> -->
                            <!-- <th scope="col">Receipt Amount</th> -->
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngIf="ApprovalTableArr.length === 0">
                            <td colspan="16" class="text-center"> No record found.</td>
                        </tr>
                        <tr *ngFor="
            let data of ApprovalTableArr | filter: viewSearch;
            let i = index" tabindex="0">
                            <td>{{ i + 1 }}</td>
                            <!-- <td>{{ data.FbName }}</td> -->

                        
                            <td>{{ data.Time }}</td>
                            <td>
                                <button mat-icon-button class="gHandIcon">
                                    <i (click)="approvalJVDetails(data, i)" class="fa fa-hand-o-right"
                                        aria-hidden="true"></i>
                                </button>

                            </td>
                            <td>{{ data.Trnid }}</td>
                            <td>{{ data.WStatus }}</td>
                            <td>{{ data.VStatus }}</td>
                            <!-- <td>{{ data.CurStatus }}</td> -->
                            <td>{{ data.usr }}</td>
                            <td>{{ data.FromLocation }}</td>
                       
                            <td>{{ data.ApprovalTime || 'nil'}}</td>
                            <td>{{ data.ApprovalUsr || 'nil'}}</td>
                            <td>{{ data.RejectedReason || 'nil'}}</td>
                            <td>{{ data.ReceiptAmt | currency:"INR":"symbol" }}</td>
                            <!-- <td>{{ data.supcode }}</td> -->
                            <!-- <td>{{ data.supname }}</td> -->
                            <!-- <td style="text-align: right;">{{ data.ReceiptAmt }}</td> -->
                        </tr>
                        <tr *ngIf="approveLoad">
                            <td [colSpan]="16">
                                <div class="SkeltonLoader text-center justify-content-center d-flex">
                                    <mat-spinner></mat-spinner>
                                </div>
                            </td>
                        </tr>
                    </tbody>

                </table>

            </div>
        </section>

    </div>

</section>

<ng-template #debitBulkTemp let-data>
    <div class="gDialogTitle">
        <span></span>
        <span class=""> Bulk {{data}} Upload</span>

        <button type="button" id="submit" mat-button class="gDialogCloseButton" (click)="dialog.closeAll()">
            <mat-icon>close</mat-icon>
        </button>
    </div>

    <div class="gDialogContainer">
        <!--   ============================ tab1 ============================================== -->
        <div class="row">

            <div class="col-12 my-1 text-center ">
                <button type="button" mat-button class="gSaveButton  mx-1" (click)="browsebutton()">
                    Browse XL
                    &nbsp;<mat-icon>attachment</mat-icon> </button>
                <input type="file" [(ngModel)]="inputValue" hidden id="import" accept=".xlsx, .xls"
                    (change)="onFileChange($event, invalidBrCode, data)">


                <button mat-button class="gSaveButton mx-1 my-0" (click)="previewclick(data)">
                    Template
                    &nbsp;
                    <mat-icon>save_alt</mat-icon>
                </button>

            </div>
        </div>

        <div class="gDialogContainer p-0 mt-2">
            <div class="gTableSection" >
                <div class="gTableActionheaders justify-content-center">
                    <span class="gInputLable" *ngIf="InvalidText === ''">Sample XL Data Format (Reference purpose only) </span>
                    <span class="gInputLable" *ngIf="InvalidText !== ''">{{InvalidText}}</span>
                </div>
                <div class="gInnerTable" style="max-height: calc(100vh - 157px)">
                    <table mat-table #table [dataSource]="BulkDataSource" class="table gNormalTable-sm" > 
                        <ng-container [matColumnDef]="column" *ngFor="let column of InvaliddisplayedColumns; ">
                            <th mat-header-cell *matHeaderCellDef class="">
                                <span *ngIf="invalidAccArr.length > 0"> {{column === 'SNo' ? 'Row.No' :column }}</span>
                                <span *ngIf="invalidAccArr.length === 0"> {{column === 'SNo' ? 'S.No' :column }}</span>

                            </th>
                            <td mat-cell *matCellDef="let element ;let i=index " class="">
                                <span *ngIf="column === 'SNo'">{{i+1}}</span>
                                <span *ngIf="column !== 'SNo'">{{element[column] ? element[column] : 'null'}}</span>
                            </td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="InvaliddisplayedColumns " class="">
                        </tr>
                        <tr mat-row *matRowDef="let row; columns: InvaliddisplayedColumns; " class=""></tr>
                    </table>
                </div>
            </div>
        </div>

    </div>

</ng-template>
<!-- <ng-template #JvView> -->


<!-- </ng-template> -->



<!-- preview file -->
<ng-template #printJournalVoucher let-data>
    <div class="mx-2">
        <div class="row">
            <div class="col-6">
            </div>
            <div class="col-6 d-flex gap-3 justify-content-end">
                <button type="button" style="float: right" mat-icon-button class="gNormalButton1"
                    [elementToPrint]="printSRFile" ngPrint>
                    <mat-icon>print</mat-icon>
                </button>

                <button mat-icon-button class="gIconButton" (click)="dialog.closeAll()">&#x2715;</button>


            </div>
        </div>


        <div #printSRFile class="printScreen">
            <div class="row mx-2">
                <div class="col-4">
                    <img [src]="data.CmpLogo">
                </div>
                <div class="col-8">
                    <h4 style="text-align: left; margin: 0px; font-weight: bold;font-size: large;">
                        {{ data.Company }}
                    </h4>
                    <h6 style="text-align: left; font-size: 12px; ">
                        {{ data.add1 }}, {{ data.add2 }},{{ data.add3 }}, {{ data.States }}, Pin: {{ data.pincode }} Ph:
                        {{
                        data.tin }}
                        <br> Web: {{ data.RegOffWebsite }}
                        <br>
                        <span
                            style="text-align: left; margin: 0px; font-weight: bold;font-size: larger; text-transform: capitalize;">GSTIN:
                            {{ data.tin }}</span>
                    </h6>
                </div>

            </div>
            <h4 style="text-align: center; font-weight: bolder mb-0 gInputLable">Journal Voucher</h4>

            <div class="row mx-2">

                <div class="mb-2 d-flex justify-content-between"> <span> <b> Voucher Information</b></span>
                    <span>  <b>{{VoucherName}}</b> </span>
                </div>
                <br>
                <div class="col-4">
                    <span class="gInputLable">Journal Type: <b>{{voucherInformationForm.get('JvType').value}}</b> </span>
                </div>
                <div class="col-4">
                    <span class="gInputLable">Accounting Date: <b>{{voucherInformationForm.get('accDate').value}}</b> </span>
                </div>
                <div class="col-4">
                    <span VoucherName>Narration: <b>{{voucherInformationForm.get('narration').value}}</b> </span>
                </div>
            </div>
            <div class="row ">
                <div class="mt-2  col-12 col-xl-12">
                    <section class="gTableSection">
                        <div class="gTableActionheaders">
                            <div class="col-12 text-start">
                                <span class="gInputLable">L1 - Table ( Debit)</span>
                            </div>
                        </div>
                        <div class="gInnerTable">
                            <table class="gNormalTable-sm table" id="table" width="100%">
                                <thead>
                                    <tr>
                                        <th style="font-size: 8px;">S.No</th>
                                        <th style="font-size: 8px;">Fin Book</th>
                                        <th style="font-size: 8px;">Cost Center</th>
                                        <th style="font-size: 8px;">Account Type</th>
                                        <th style="font-size: 8px;">AccCode / Ussage Id</th>
                                        <th style="font-size: 8px;max-width: 200px;">Acc/Ussage Name</th>
                                        <th style="font-size: 8px;max-width: 200px;">Attachments</th>
                                        <th style="font-size: 8px;">Remarks</th>
                                        <th style="font-size: 8px;">Amount</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="
let row of DebitTableArr | filter: viewSearch1;
let i = index">
                                        <td style="font-size: 8px;">{{ i + 1 }}</td>
                                        <td style="font-size: 8px;">{{ row.FinBookName ?? row.FbName }}</td>
                                        <td style="font-size: 8px;">{{row.costCenter ?? row.CostCenterName ??
                                            row.BrName}}</td>
                                        <td style="font-size: 8px;">{{row.AcSelectionType}}</td>
                                        <td style="font-size: 8px;">{{ row.AccCode_UssageCode ?? row.AcUsCode }}</td>
                                        <td style="font-size: 8px;max-width: 200px;">{{ row.AccName_UssageName ??
                                            row.AcUsName}}</td>
                                            <td style="font-size: 8px;max-width: 200px;">{{row.fileName ?? 'Nill'}}</td>
                                            <td style="font-size: 8px;">{{ row.remarks ?? row.Remarks }}</td>
                                        <td style="font-size: 8px;">{{ row.Amount ?? row.TrnAmt | currency:"INR"}}</td>
                                    </tr>
                                    <tr class="toggleFooter" *ngIf="DebitTableArr.length > 0">
                                        <td style="font-size: 8px;"></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td style="font-size: 8px;">Total Amount</td>
                                        <td style="font-size: 8px;">
                                            {{getDebitTotalAmount() | currency:"INR":"symbol" }}
                                        </td>
                                
                                    </tr>
                                    <tr *ngIf="DebitTableArr.length === 0">
                                        <td colspan="9"> No records Found</td>
                                    </tr>

                                </tbody>
                            </table>
                        </div>
                    </section>
                </div>
                <div class="mt-2 col-12 col-xl-12">
                    <section class="gTableSection">
                        <div class="gTableActionheaders">
                            <div class="col-12 text-start">
                                <span class="gInputLable"> Credit Table</span>
                            </div>
                        </div>
                        <div class="gInnerTable">
                            <table class="gNormalTable-sm table" id="table" width="100%">
                                <thead>
                                    <tr>
                                        <th style="font-size: 8px;">S.No</th>
                                        <th style="font-size: 8px;">Fin Book</th>
                                        <th style="font-size: 8px;">Cost Center</th>
                                        <th style="font-size: 8px;">Account Type</th>
                                        <th style="font-size: 8px;">AccCode / Ussage Id</th>
                                        <th style="font-size: 8px;max-width: 200px;">Acc/Ussage Name</th>
                                        <th style="font-size: 8px;max-width: 200px;">Attachments</th>
                                        <th style="font-size: 8px;">Remarks</th>
                                        <th style="font-size: 8px;">Amount</th>

                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="
        let row of CreditTableArr | filter: viewSearch;
        let i = index">
                                        <td style="font-size: 8px;">{{ i + 1 }}</td>
                                        <td style="font-size: 8px;">{{ row.FinBookName ?? row.FbName }}</td>
                                        <td style="font-size: 8px;">{{ row.costCenter ?? row.CostCenterName ??
                                            row.BrName}}</td>
                                        <td style="font-size: 8px;">{{ row.AcSelectionType }}</td>
                                        <td style="font-size: 8px;">{{ row.AccCode_UssageCode ?? row.AcUsCode }}</td>
                                        <td style="font-size: 8px; max-width: 200px;">{{ row.AccName_UssageName ??
                                            row.AcUsName }}</td>
                                            <td style="font-size: 8px; max-width: 200px;">{{row.fileName ?? 'Nill'}}</td>

                                            <td style="font-size: 8px;">{{ row.remarks ?? row.Remarks }}</td>
                                        <td style="font-size: 8px;">{{ row.Amount ?? row.TrnAmt | currency:"INR" }}</td>
                                    </tr>
                                    <tr class="toggleFooter" *ngIf="CreditTableArr.length > 0">
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td style="font-size: 8px;">Total Amount</td>
                                        <td style="font-size: 8px;">
                                            {{getCreditTotalAmount() | currency:"INR":"symbol" }}
                                        </td>
                                    
                                    </tr>
                                    <tr *ngIf="CreditTableArr.length === 0">

                                        <td colspan="9" class="text-center"> No records Found</td>

                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </section>
                </div>
            </div>

            <div class="row mb -2" style="margin-top: 30px">
                <div class="col-6">
                    <div class="row">
                        <div class="col-12 gInputLable">Data Entered By</div>
                    </div>
                    <div class="row">
                        <div class="col-12 gInputLable">{{ data.User }}</div>
                    </div>
                    <div class="row">
                        <div class="col-12 gInputLable">
                            [ {{ date | date: "yyyy-MM-dd hh:mm:ss a":"+0530" }} ]
                        </div>
                    </div>
                </div>
                <div class="col-6 gInputLable" >Verified By</div>
            </div>
        </div>
    </div>
</ng-template>



<ng-template #JVRejectReverse let-data>
    <div class="gDialogTitle">
        <span></span>
        <span class="">JV {{data}}</span>
        <button type="button" id="submit" class="gDialogCloseButton" (click)="dialog.closeAll()">&#x2715;</button>
    </div>
    <div class="gDialogContainer">

        <div class="row">

            <div class="row form-group">
                <mat-label class="gInputLable col-sm-12 col-md-4 col-lg-4">Reason for {{data}}</mat-label>
                <div class="col-sm-12 col-md-7 col-lg-7">
                    <input class="gInnerInput-border" #message [formControl]="Reason"
                        (keydown)="keytab($event, 'rejectbutton')" />
                </div>
            </div>
            <br>
            <div class="text-center d-flex gap-3 justify-content-center mt-4">
       
                <button type="button" *ngIf="data === 'Reversel'" mat-button class="gSaveButton" id="rejectbutton"
                    (click)="rejectSR('Reverse', Reason.value)">
                    Reverse
                </button>
                <button *ngIf="data !== 'Reversel'" type="button" mat-button class="gSaveButton" id="rejectbutton"
                    (click)="rejectSR('Reject', Reason.value)">
                    Reject
                </button>
                <button type="button" mat-button class="gDeleteButton" (click)="dialog.closeAll()">
                    Cancel
                </button>
            </div>
        </div>

    </div>

</ng-template>




<div class="modal fade" id="reqStatusVendorModal" #content tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
    aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">

    <div class="modal-dialog modal-lg modal-dialog-centered">

        <div class="modal-content  gModalContent">



            <div class="gDialogTitle">

                <span></span> <!-- for center position -->

                <!-- <span>{{JVHistoryArr[0]?.supName}}</span> -->
                <span>Detiled View</span>

                <button type="button" id="submit" class="gDialogCloseButton" data-bs-dismiss="modal">

                    <mat-icon>close</mat-icon>

                </button>

            </div>

            <div class="modal-body gDialogContainer p-1">

                <div class="d-flex align-items-center justify-content-center">

                    <label class="gInputLable"> Req Usr : {{JVHistoryArr[0]?.ReqUsr}} | Date & Time :
                        {{JVHistoryArr[0]?.ReqTime}}</label>

                </div>

                <div class="gTableSection">

                    <div class="gInnerTable">

                        <table class="gNormalTable-sm table">

                            <thead class="tblhead">

                                <tr>
                                    <th>Sno </th>

                                    <th>Level</th>
                                    <th>Trn No</th>

                                    <th>Status</th>

                                    <th>Approved Usr</th>

                                    <th>Approved Date & Time</th>

                                </tr>

                            </thead>

                            <tbody>

                                <tr *ngFor="let reqStatus of JVHistoryArr;let i=index">

                                    <td>{{i+1}}</td>

                                    <td>{{reqStatus.LevelType}}</td>

                                    <td>{{reqStatus.TrnNo}}</td>

                                    <td>{{reqStatus.CurStatus}}</td>

                                    <td>{{reqStatus.ApprovalUsr}}</td>

                                    <td>{{reqStatus.ApprovalTime}}</td>

                                </tr>

                            </tbody>

                        </table>

                    </div>

                    <div class="text-center" *ngIf="JVHistoryArr?.length === 0">

                        <p class="para p-4">No records found!</p>

                    </div>


                </div>

            </div>

        </div>

    </div>

</div>